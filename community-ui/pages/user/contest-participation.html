<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Contest #1 - SkillPort Community</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.min.js"></script>
  <style>
    body { font-family: 'Inter', sans-serif; }
  </style>
</head>
<body class="bg-gradient-to-br from-slate-50 via-white to-blue-50 min-h-screen">
  <!-- Navbar -->
  <nav class="sticky top-0 z-50 bg-white/80 backdrop-blur-xl border-b border-slate-200/50 shadow-sm">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex justify-between items-center h-16">
        <div class="flex items-center gap-2 group">
          <div class="w-8 h-8 bg-gradient-to-br from-blue-600 to-indigo-600 rounded-lg flex items-center justify-center group-hover:scale-105 transition-transform">
            <i data-lucide="sparkles" class="w-5 h-5 text-white"></i>
          </div>
          <span class="text-xl font-bold bg-gradient-to-r from-slate-900 to-slate-600 bg-clip-text text-transparent">
            SkillPort
          </span>
        </div>
        <div class="hidden md:flex items-center gap-1">
          <a href="user-dashboard.html" class="flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium text-slate-600 hover:text-slate-900 hover:bg-slate-50">
            <i data-lucide="layout-dashboard" class="w-4 h-4"></i> Dashboard
          </a>
          <a href="user-contests.html" class="flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium bg-blue-50 text-blue-700 shadow-sm">
            <i data-lucide="trophy" class="w-4 h-4"></i> Contests
          </a>
          <a href="user-tasks.html" class="flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium text-slate-600 hover:text-slate-900 hover:bg-slate-50">
            <i data-lucide="target" class="w-4 h-4"></i> Tasks
          </a>
          <a href="user-leaderboard.html" class="flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium text-slate-600 hover:text-slate-900 hover:bg-slate-50">
            <i data-lucide="bar-chart-3" class="w-4 h-4"></i> Leaderboard
          </a>
          <a href="user-mentor-feedback.html" class="flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium text-slate-600 hover:text-slate-900 hover:bg-slate-50">
            <i data-lucide="message-circle" class="w-4 h-4"></i> Mentor Feedback
          </a>
          <a href="certificates.html" class="flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium text-slate-600 hover:text-slate-900 hover:bg-slate-50">
            <i data-lucide="award" class="w-4 h-4"></i> Certificates
          </a>
        </div>
      </div>
    </div>
  </nav>

  <!-- Main Content -->
  <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10">
    <!-- Contest Header -->
    <div class="bg-white rounded-lg shadow-lg p-6 mb-8">
      <div class="flex items-center justify-between mb-4">
        <div>
          <h1 class="text-3xl font-bold text-slate-900 mb-2">Contest #1</h1>
          <p class="text-slate-600">Data Structures and Algorithms Challenge</p>
        </div>
        <div class="text-right">
          <div class="text-2xl font-bold text-red-600 mb-1" id="countdown">02:14:35</div>
          <div class="text-sm text-slate-600">Time Remaining</div>
        </div>
      </div>
      
      <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
        <div class="bg-blue-50 rounded-lg p-4 text-center">
          <div class="text-2xl font-bold text-blue-600">5</div>
          <div class="text-sm text-slate-600">Total Problems</div>
        </div>
        <div class="bg-green-50 rounded-lg p-4 text-center">
          <div class="text-2xl font-bold text-green-600">3</div>
          <div class="text-sm text-slate-600">Solved</div>
        </div>
        <div class="bg-orange-50 rounded-lg p-4 text-center">
          <div class="text-2xl font-bold text-orange-600">1</div>
          <div class="text-sm text-slate-600">Attempted</div>
        </div>
        <div class="bg-purple-50 rounded-lg p-4 text-center">
          <div class="text-2xl font-bold text-purple-600">780</div>
          <div class="text-sm text-slate-600">Current Score</div>
        </div>
      </div>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
      <!-- Problems List -->
      <div class="lg:col-span-2">
        <div class="bg-white rounded-lg shadow-lg p-6">
          <div class="flex items-center justify-between mb-6">
            <h2 class="text-2xl font-bold text-slate-900">Contest Problems</h2>
            <div class="flex items-center gap-2">
              <span class="text-sm text-slate-600">Filter by topic:</span>
              <div class="flex gap-2">
                <button class="topic-filter px-3 py-1 rounded-full text-sm border border-slate-300 hover:bg-slate-50 active" data-topic="all">
                  All
                </button>
                <button class="topic-filter px-3 py-1 rounded-full text-sm border border-slate-300 hover:bg-slate-50" data-topic="arrays">
                  Arrays
                </button>
                <button class="topic-filter px-3 py-1 rounded-full text-sm border border-slate-300 hover:bg-slate-50" data-topic="strings">
                  Strings
                </button>
                <button class="topic-filter px-3 py-1 rounded-full text-sm border border-slate-300 hover:bg-slate-50" data-topic="linked-lists">
                  Linked Lists
                </button>
                <button class="topic-filter px-3 py-1 rounded-full text-sm border border-slate-300 hover:bg-slate-50" data-topic="dynamic-programming">
                  DP
                </button>
              </div>
            </div>
          </div>
          
          <div class="space-y-4" id="problems-container">
            <!-- Problem 1 - Solved -->
            <div class="problem-card border border-green-200 rounded-lg p-4 bg-green-50" data-topics="arrays,hash-table">
              <div class="flex items-center justify-between mb-3">
                <div class="flex items-center gap-3">
                  <div class="w-8 h-8 bg-green-600 rounded-full flex items-center justify-center text-white font-bold">1</div>
                  <div>
                    <h3 class="font-semibold text-slate-900">Problem #1</h3>
                    <div class="flex items-center gap-2 text-sm text-slate-600 mb-1">
                      <span class="bg-green-100 text-green-700 px-2 py-1 rounded">Easy</span>
                      <span>• 200 points</span>
                    </div>
                    <div class="flex gap-1">
                      <span class="bg-blue-100 text-blue-700 px-2 py-1 rounded text-xs">Arrays</span>
                      <span class="bg-purple-100 text-purple-700 px-2 py-1 rounded text-xs">Hash Table</span>
                    </div>
                  </div>
                </div>
                <div class="flex items-center gap-2">
                  <span class="bg-green-100 text-green-700 px-2 py-1 rounded text-sm">Solved</span>
                  <a href="https://leetcode.com/problems/two-sum/" target="_blank" class="bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700">
                    <i data-lucide="external-link" class="w-4 h-4 inline mr-1"></i>Solve
                  </a>
                </div>
              </div>
            </div>

            <!-- Problem 2 - Solved -->
            <div class="problem-card border border-green-200 rounded-lg p-4 bg-green-50" data-topics="linked-lists,math">
              <div class="flex items-center justify-between mb-3">
                <div class="flex items-center gap-3">
                  <div class="w-8 h-8 bg-green-600 rounded-full flex items-center justify-center text-white font-bold">2</div>
                  <div>
                    <h3 class="font-semibold text-slate-900">Add Two Numbers</h3>
                    <div class="flex items-center gap-2 text-sm text-slate-600 mb-1">
                      <span class="bg-yellow-100 text-yellow-700 px-2 py-1 rounded">Medium</span>
                      <span>• 300 points</span>
                    </div>
                    <div class="flex gap-1">
                      <span class="bg-indigo-100 text-indigo-700 px-2 py-1 rounded text-xs">Linked Lists</span>
                      <span class="bg-orange-100 text-orange-700 px-2 py-1 rounded text-xs">Math</span>
                    </div>
                  </div>
                </div>
                <div class="flex items-center gap-2">
                  <span class="bg-green-100 text-green-700 px-2 py-1 rounded text-sm">Solved</span>
                  <a href="https://leetcode.com/problems/add-two-numbers/" target="_blank" class="bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700">
                    <i data-lucide="external-link" class="w-4 h-4 inline mr-1"></i>Solve
                  </a>
                </div>
              </div>
            </div>

            <!-- Problem 3 - Solved -->
            <div class="problem-card border border-green-200 rounded-lg p-4 bg-green-50" data-topics="strings,sliding-window">
              <div class="flex items-center justify-between mb-3">
                <div class="flex items-center gap-3">
                  <div class="w-8 h-8 bg-green-600 rounded-full flex items-center justify-center text-white font-bold">3</div>
                  <div>
                    <h3 class="font-semibold text-slate-900">Longest Substring Without Repeating Characters</h3>
                    <div class="flex items-center gap-2 text-sm text-slate-600 mb-1">
                      <span class="bg-yellow-100 text-yellow-700 px-2 py-1 rounded">Medium</span>
                      <span>• 300 points</span>
                    </div>
                    <div class="flex gap-1">
                      <span class="bg-green-100 text-green-700 px-2 py-1 rounded text-xs">Strings</span>
                      <span class="bg-teal-100 text-teal-700 px-2 py-1 rounded text-xs">Sliding Window</span>
                    </div>
                  </div>
                </div>
                <div class="flex items-center gap-2">
                  <span class="bg-green-100 text-green-700 px-2 py-1 rounded text-sm">Solved</span>
                  <a href="https://leetcode.com/problems/longest-substring-without-repeating-characters/" target="_blank" class="bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700">
                    <i data-lucide="external-link" class="w-4 h-4 inline mr-1"></i>Solve
                  </a>
                </div>
              </div>
            </div>

            <!-- Problem 4 - Attempted -->
            <div class="problem-card border border-orange-200 rounded-lg p-4 bg-orange-50" data-topics="arrays,binary-search,divide-and-conquer">
              <div class="flex items-center justify-between mb-3">
                <div class="flex items-center gap-3">
                  <div class="w-8 h-8 bg-orange-600 rounded-full flex items-center justify-center text-white font-bold">4</div>
                  <div>
                    <h3 class="font-semibold text-slate-900">Problem #2</h3>
                    <div class="flex items-center gap-2 text-sm text-slate-600 mb-1">
                      <span class="bg-red-100 text-red-700 px-2 py-1 rounded">Hard</span>
                      <span>• 400 points</span>
                    </div>
                    <div class="flex gap-1">
                      <span class="bg-blue-100 text-blue-700 px-2 py-1 rounded text-xs">Arrays</span>
                      <span class="bg-yellow-100 text-yellow-700 px-2 py-1 rounded text-xs">Binary Search</span>
                      <span class="bg-pink-100 text-pink-700 px-2 py-1 rounded text-xs">Divide & Conquer</span>
                    </div>
                  </div>
                </div>
                <div class="flex items-center gap-2">
                  <span class="bg-orange-100 text-orange-700 px-2 py-1 rounded text-sm">Attempted</span>
                  <a href="https://leetcode.com/problems/median-of-two-sorted-arrays/" target="_blank" class="bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700">
                    <i data-lucide="external-link" class="w-4 h-4 inline mr-1"></i>Solve
                  </a>
                </div>
              </div>
            </div>

            <!-- Problem 5 - Not Attempted -->
            <div class="problem-card border border-slate-200 rounded-lg p-4 bg-white" data-topics="strings,dynamic-programming">
              <div class="flex items-center justify-between mb-3">
                <div class="flex items-center gap-3">
                  <div class="w-8 h-8 bg-slate-400 rounded-full flex items-center justify-center text-white font-bold">5</div>
                  <div>
                    <h3 class="font-semibold text-slate-900">Regular Expression Matching</h3>
                    <div class="flex items-center gap-2 text-sm text-slate-600 mb-1">
                      <span class="bg-red-100 text-red-700 px-2 py-1 rounded">Hard</span>
                      <span>• 400 points</span>
                    </div>
                    <div class="flex gap-1">
                      <span class="bg-green-100 text-green-700 px-2 py-1 rounded text-xs">Strings</span>
                      <span class="bg-red-100 text-red-700 px-2 py-1 rounded text-xs">Dynamic Programming</span>
                    </div>
                  </div>
                </div>
                <div class="flex items-center gap-2">
                  <span class="bg-slate-100 text-slate-600 px-2 py-1 rounded text-sm">Not Attempted</span>
                  <a href="https://leetcode.com/problems/regular-expression-matching/" target="_blank" class="bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700">
                    <i data-lucide="external-link" class="w-4 h-4 inline mr-1"></i>Solve
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Live Leaderboard -->
      <div class="lg:col-span-1">
        <div class="bg-white rounded-lg shadow-lg p-6 sticky top-24">
          <h2 class="text-xl font-bold text-slate-900 mb-4">Live Leaderboard</h2>
          
          <div class="space-y-3">
            <!-- Rank 1 -->
            <div class="flex items-center justify-between p-3 bg-amber-50 rounded-lg border border-amber-200">
              <div class="flex items-center gap-3">
                <div class="w-8 h-8 bg-amber-500 rounded-full flex items-center justify-center text-white font-bold text-sm">1</div>
                <div>
                  <div class="font-medium text-slate-900">Priya Sharma</div>
                  <div class="text-sm text-slate-600">5/5 solved</div>
                </div>
              </div>
              <div class="text-right">
                <div class="font-bold text-amber-600">850</div>
                <div class="text-xs text-slate-500">points</div>
              </div>
            </div>

            <!-- Rank 2 -->
            <div class="flex items-center justify-between p-3 bg-slate-50 rounded-lg border border-slate-200">
              <div class="flex items-center gap-3">
                <div class="w-8 h-8 bg-slate-500 rounded-full flex items-center justify-center text-white font-bold text-sm">2</div>
                <div>
                  <div class="font-medium text-slate-900">Student #1</div>
                  <div class="text-sm text-slate-600">5/5 solved</div>
                </div>
              </div>
              <div class="text-right">
                <div class="font-bold text-slate-600">820</div>
                <div class="text-xs text-slate-500">points</div>
              </div>
            </div>

            <!-- Rank 3 - Current User -->
            <div class="flex items-center justify-between p-3 bg-blue-50 rounded-lg border-2 border-blue-300">
              <div class="flex items-center gap-3">
                <div class="w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center text-white font-bold text-sm">3</div>
                <div>
                  <div class="font-medium text-slate-900">Student #2</div>
                  <div class="text-sm text-slate-600">3/5 solved</div>
                </div>
              </div>
              <div class="text-right">
                <div class="font-bold text-blue-600">780</div>
                <div class="text-xs text-slate-500">points</div>
              </div>
            </div>

            <!-- Rank 4 -->
            <div class="flex items-center justify-between p-3 bg-white rounded-lg border border-slate-200">
              <div class="flex items-center gap-3">
                <div class="w-8 h-8 bg-slate-300 rounded-full flex items-center justify-center text-slate-600 font-bold text-sm">4</div>
                <div>
                  <div class="font-medium text-slate-900">Student #3</div>
                  <div class="text-sm text-slate-600">2/5 solved</div>
                </div>
              </div>
              <div class="text-right">
                <div class="font-bold text-slate-600">650</div>
                <div class="text-xs text-slate-500">points</div>
              </div>
            </div>
          </div>

          <div class="mt-4 pt-4 border-t border-slate-200">
            <div class="text-center">
              <div class="text-sm text-slate-600 mb-2">Your Progress</div>
              <div class="w-full bg-slate-200 rounded-full h-2">
                <div class="bg-blue-600 h-2 rounded-full" style="width: 60%"></div>
              </div>
              <div class="text-sm text-slate-600 mt-2">3 of 5 problems solved</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Submission Instructions -->
    <div class="bg-white rounded-lg shadow-lg p-6 mt-8">
      <h2 class="text-xl font-bold text-slate-900 mb-4">How to Submit Solutions</h2>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        <div class="text-center">
          <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mx-auto mb-3">
            <i data-lucide="external-link" class="w-6 h-6 text-blue-600"></i>
          </div>
          <h3 class="font-semibold text-slate-900 mb-2">1. Click Solve</h3>
          <p class="text-sm text-slate-600">Click the "Solve" button next to any problem to open it on the external platform</p>
        </div>
        <div class="text-center">
          <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mx-auto mb-3">
            <i data-lucide="code" class="w-6 h-6 text-green-600"></i>
          </div>
          <h3 class="font-semibold text-slate-900 mb-2">2. Solve on Platform</h3>
          <p class="text-sm text-slate-600">Use the external platform's code editor to solve the problem</p>
        </div>
        <div class="text-center">
          <div class="w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mx-auto mb-3">
            <i data-lucide="check-circle" class="w-6 h-6 text-purple-600"></i>
          </div>
          <h3 class="font-semibold text-slate-900 mb-2">3. Submit Solution</h3>
          <p class="text-sm text-slate-600">Submit your solution on the external platform. Your progress will be updated here automatically</p>
        </div>
      </div>
    </div>
  </main>

  <!-- Load API and App scripts -->
  <script src="../js/api.js"></script>
  <script src="../js/app.js"></script>

  <script>
    lucide.createIcons();
    
    // Contest Participation Controller
    class ContestParticipation {
      constructor() {
        this.api = window.SkillPortAPI;
        this.contestId = null;
        this.contestData = null;
        this.problems = [];
        this.userProgress = null;
        this.countdownInterval = null;
        this.init();
      }

      async init() {
        try {
          // Check if user is authenticated
          if (!this.api.isAuthenticated()) {
            window.location.href = '../index.html';
            return;
          }

          // Get contest ID from URL parameters
          this.contestId = new URLSearchParams(window.location.search).get('contest');
          if (!this.contestId) {
            this.showError('No contest ID provided');
            return;
          }

          // Load contest data
          await this.loadContestData();
          await this.loadProblems();
          await this.loadUserProgress();
          
          // Setup event listeners
          this.setupEventListeners();
          
          // Start countdown
          this.startCountdown();
          
        } catch (error) {
          console.error('Contest participation initialization failed:', error);
          this.showError('Failed to initialize contest participation page');
        }
      }

      async loadContestData() {
        try {
          const response = await this.api.getContestDetails(this.contestId);
          if (response.success) {
            this.contestData = response.data;
            this.updateContestDisplay();
          }
        } catch (error) {
          console.error('Failed to load contest data:', error);
          this.showError('Failed to load contest information');
        }
      }

      async loadProblems() {
        try {
          const response = await this.api.getContestProblems(this.contestId);
          if (response.success) {
            this.problems = response.data.problems;
            this.updateProblemsDisplay();
          }
        } catch (error) {
          console.error('Failed to load contest problems:', error);
          this.showError('Failed to load contest problems');
        }
      }

      async loadUserProgress() {
        try {
          const response = await this.api.getUserContestProgress(this.contestId);
          if (response.success) {
            this.userProgress = response.data.progress;
            this.updateProgressDisplay();
          }
        } catch (error) {
          console.error('Failed to load user progress:', error);
        }
      }

      updateContestDisplay() {
        if (!this.contestData) return;

        const elements = {
          title: document.querySelector('h1'),
          description: document.querySelector('p.text-slate-600'),
          totalProblems: document.querySelector('.bg-blue-50 .text-2xl'),
          solved: document.querySelector('.bg-green-50 .text-2xl'),
          attempted: document.querySelector('.bg-orange-50 .text-2xl'),
          currentScore: document.querySelector('.bg-purple-50 .text-2xl')
        };

        if (elements.title) elements.title.textContent = this.contestData.name || 'Contest';
        if (elements.description) elements.description.textContent = this.contestData.description || '';
        
        if (this.userProgress) {
          if (elements.totalProblems) elements.totalProblems.textContent = this.problems.length || 0;
          if (elements.solved) elements.solved.textContent = this.userProgress.solved || 0;
          if (elements.attempted) elements.attempted.textContent = this.userProgress.attempted || 0;
          if (elements.currentScore) elements.currentScore.textContent = this.userProgress.currentScore || 0;
        }
      }

      updateProblemsDisplay() {
        // TODO: Implement dynamic problems display
        console.log('Problems data:', this.problems);
      }

      updateProgressDisplay() {
        // TODO: Implement dynamic progress display
        console.log('User progress:', this.userProgress);
      }

      setupEventListeners() {
        // Topic Filtering Functionality
        const filterButtons = document.querySelectorAll('.topic-filter');
        const problemCards = document.querySelectorAll('.problem-card');

        filterButtons.forEach(button => {
          button.addEventListener('click', (e) => {
            const selectedTopic = e.target.getAttribute('data-topic');
            this.filterProblemsByTopic(selectedTopic, filterButtons, problemCards);
          });
        });
      }

      filterProblemsByTopic(selectedTopic, filterButtons, problemCards) {
        // Update active button state
        filterButtons.forEach(btn => {
          btn.classList.remove('active', 'bg-blue-600', 'text-white');
          btn.classList.add('border-slate-300', 'hover:bg-slate-50');
        });
        
        const activeButton = Array.from(filterButtons).find(btn => btn.getAttribute('data-topic') === selectedTopic);
        if (activeButton) {
          activeButton.classList.add('active', 'bg-blue-600', 'text-white');
          activeButton.classList.remove('border-slate-300', 'hover:bg-slate-50');
        }

        // Filter problem cards
        problemCards.forEach(card => {
          const cardTopics = card.getAttribute('data-topics')?.split(',') || [];
          
          if (selectedTopic === 'all' || cardTopics.includes(selectedTopic)) {
            card.style.display = 'block';
            card.style.opacity = '1';
          } else {
            card.style.display = 'none';
            card.style.opacity = '0';
          }
        });

        // Update problem numbers for visible cards
        let visibleIndex = 1;
        problemCards.forEach(card => {
          if (card.style.display !== 'none') {
            const numberElement = card.querySelector('.w-8.h-8');
            if (numberElement) {
              numberElement.textContent = visibleIndex;
            }
            visibleIndex++;
          }
        });
      }

      startCountdown() {
        if (!this.contestData || !this.contestData.endTime) return;

        this.countdownInterval = setInterval(() => {
          this.updateCountdown();
        }, 1000);
        
        this.updateCountdown(); // Initial update
      }

      updateCountdown() {
        if (!this.contestData || !this.contestData.endTime) return;

        const now = new Date().getTime();
        const endTime = new Date(this.contestData.endTime).getTime();
        const timeLeft = endTime - now;

        const countdownElement = document.getElementById('countdown');
        if (!countdownElement) return;

        if (timeLeft > 0) {
          const hours = Math.floor(timeLeft / (1000 * 60 * 60));
          const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
          const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);

          countdownElement.textContent = 
            `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        } else {
          countdownElement.textContent = '00:00:00';
          this.stopCountdown();
          this.showNotification('Contest has ended!', 'info');
        }
      }

      stopCountdown() {
        if (this.countdownInterval) {
          clearInterval(this.countdownInterval);
          this.countdownInterval = null;
        }
      }

      async solveProblem(problemId) {
        try {
          // Redirect to code editor with problem context
          window.location.href = `../code-editor.html?problem=${problemId}&contest=${this.contestId}`;
        } catch (error) {
          console.error('Failed to open problem:', error);
          this.showError('Failed to open problem');
        }
      }

      // Utility functions
      showSuccess(message) {
        this.showNotification(message, 'success');
      }

      showError(message) {
        this.showNotification(message, 'error');
      }

      showNotification(message, type = 'info') {
        const notification = document.createElement('div');
        notification.className = `fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg ${
          type === 'success' ? 'bg-green-500 text-white' :
          type === 'error' ? 'bg-red-500 text-white' :
          'bg-blue-500 text-white'
        }`;
        notification.textContent = message;

        document.body.appendChild(notification);

        setTimeout(() => {
          notification.remove();
        }, 3000);
      }
    }

    // Initialize when DOM is ready
    document.addEventListener('DOMContentLoaded', () => {
      window.contestParticipation = new ContestParticipation();
    });
  </script>
</body>
</html> 