<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Manage Contest - PW IOI Community</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <link href="../../css/tailwind.min.css" rel="stylesheet">
  <script type="module" src="https://unpkg.com/lucide@latest/dist/umd/lucide.min.js"></script>
  <style>
    body { font-family: 'Inter', sans-serif; }
    .modal-bg { background: rgba(30, 41, 59, 0.7); }
    
    /* Enhanced transitions and animations */
    .nav-link {
      transition: all 0.3s ease-in-out;
    }
    
    .nav-link:hover {
      background: rgba(255, 255, 255, 0.9);
      border-color: rgba(249, 115, 22, 0.3);
      box-shadow: 0 8px 32px rgba(31, 38, 135, 0.15);
      transform: translateY(-2px);
    }
    
    /* Enhanced glassy stat cards */
    .stat-card {
      transition: all 0.3s ease-in-out;
      animation: fadeInUp 0.3s ease-out;
      backdrop-filter: blur(15px);
      background: rgba(255, 255, 255, 0.65);
      border: 2px solid rgba(255, 255, 255, 0.6);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }
    
    .stat-card:hover {
      background: rgba(255, 255, 255, 0.85);
      border-color: rgba(249, 115, 22, 0.7);
      box-shadow: 0 8px 24px rgba(31, 38, 135, 0.2);
      transform: translateY(-2px) scale(1.02);
    }
    
    /* Enhanced glassy effects for all cards */
    .dashboard-card {
      transition: all 0.3s ease-in-out;
      backdrop-filter: blur(15px);
      background: rgba(255, 255, 255, 0.7);
      border: 1px solid rgba(255, 255, 255, 0.2);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }
    
    .dashboard-card:hover {
      background: rgba(255, 255, 255, 0.9);
      border-color: rgba(255, 255, 255, 0.4);
      box-shadow: 0 8px 24px rgba(31, 38, 135, 0.15);
      transform: translateY(-2px) scale(1.01);
    }
    
    /* Enhanced button hover effects */
    .btn-hover {
      transition: all 0.3s ease-in-out;
      backdrop-filter: blur(10px);
    }
    
    .btn-hover:hover {
      transform: translateY(-1px) scale(1.05);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
    }
    
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    /* Staggered animation delays */
    .stat-card:nth-child(1) { animation-delay: 0.05s; }
    .stat-card:nth-child(2) { animation-delay: 0.1s; }
    .stat-card:nth-child(3) { animation-delay: 0.15s; }
    .stat-card:nth-child(4) { animation-delay: 0.2s; }
    
    /* Page transition effects */
    .page-content {
      animation: slideIn 0.3s ease-out;
    }
    
    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateX(-20px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }
    
    /* Enhanced button interactions */
    .btn-primary {
      transition: all 0.2s ease;
      backdrop-filter: blur(10px);
    }
    
    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 32px rgba(31, 38, 135, 0.2);
    }
    
    /* Enhanced dashboard cards with hover effects */
    .bg-white.rounded-lg.shadow-lg {
      transition: all 0.2s ease;
      border: 3px solid transparent;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06);
    }
    
    .bg-white.rounded-lg.shadow-lg:hover {
      transform: translateY(-2px);
      border-color: rgba(249, 115, 22, 0.4);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15), 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    
    /* Table row hover effects */
    .table-row-hover {
      transition: all 0.3s ease-in-out;
    }
    
    .table-row-hover:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(249, 115, 22, 0.1);
      background: rgba(255, 255, 255, 0.95);
    }
    
    /* Glassy button effects */
    .glass-btn {
      transition: all 0.3s ease-in-out;
      backdrop-filter: blur(10px);
    }
    
    .glass-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(249, 115, 22, 0.2);
    }
  </style>
</head>
<body class="bg-gradient-to-br from-slate-50 via-white to-orange-50 min-h-screen">
  <!-- Navbar -->
  <nav class="sticky top-0 z-50 bg-white/80 backdrop-blur-xl border-b border-slate-200/50 shadow-sm">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex justify-between items-center h-16">
        <div class="flex items-center gap-2 group">
          <div class="w-8 h-8 bg-gradient-to-br from-orange-500 to-amber-600 rounded-lg flex items-center justify-center group-hover:scale-105 transition-transform">
            <i data-lucide="graduation-cap" class="w-5 h-5 text-white"></i>
          </div>
          <span class="text-xl font-bold bg-gradient-to-r from-slate-900 to-slate-600 bg-clip-text text-transparent">
            <span id="navbar-mentor-name">Mentor</span>
          </span>
        </div>
        <div class="hidden md:flex items-center gap-1">
          <a href="mentor-dashboard.html" class="nav-link flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium text-slate-600 hover:text-slate-900 hover:bg-slate-50">
            <i data-lucide="layout-dashboard" class="w-4 h-4"></i> Dashboard
          </a>
          <a href="mentor-contests.html" class="nav-link flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium bg-orange-50 text-orange-700 shadow-sm">
            <i data-lucide="trophy" class="w-4 h-4"></i> Contests
          </a>
          <a href="mentor-feedback.html" class="nav-link flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium text-slate-600 hover:text-slate-900 hover:bg-slate-50">
            <i data-lucide="message-circle" class="w-4 h-4"></i> Feedback
          </a>
          <a href="mentor-leaderboard.html" class="nav-link flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium text-slate-600 hover:text-slate-900 hover:bg-slate-50">
            <i data-lucide="bar-chart-3" class="w-4 h-4"></i> Leaderboard
          </a>
          <a href="mentor-profile.html" class="nav-link flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium text-slate-600 hover:text-slate-900 hover:bg-slate-50">
            <img src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=32&h=32&fit=crop&crop=face" alt="Profile" class="w-8 h-8 rounded-full object-cover shadow-lg border-2 border-white">
          </a>
        </div>
      </div>
    </div>
  </nav>

  <!-- Main Content -->
  <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10 page-content">
    <div class="mb-8">
      <h1 class="text-3xl font-bold text-slate-900 mb-2" id="contest-title">Weekly Algorithm Challenge</h1>
      <p class="text-lg text-slate-600" id="contest-description">Manage problems and view leaderboard for this contest.</p>
    </div>

    <div class="mb-8">
      <div class="bg-white rounded-lg shadow-lg p-6 dashboard-card">
        <div class="flex items-center justify-between mb-4">
          <h2 class="text-xl font-bold text-slate-900">Tasks</h2>
          <div class="flex items-center gap-2">
            <button id="leaderboardBtn" class="glass-btn p-2 rounded-lg border border-slate-200 hover:bg-orange-50 hover:border-orange-200" title="View Leaderboard">
              <i data-lucide="bar-chart-3" class="w-5 h-5 text-orange-600"></i>
            </button>
            <button id="addTaskBtn" class="glass-btn bg-orange-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-orange-400">
              <i data-lucide="plus" class="w-4 h-4"></i>
              Add Task
            </button>
          </div>
        </div>
        <div class="overflow-x-auto">
          <table class="w-full">
            <thead class="bg-slate-50 border-b border-slate-200">
              <tr>
                <th class="px-6 py-4 text-left text-sm font-semibold text-slate-900">Title</th>
                <th class="px-6 py-4 text-left text-sm font-semibold text-slate-900">Description</th>
                <th class="px-6 py-4 text-left text-sm font-semibold text-slate-900">Topic</th>
                <th class="px-6 py-4 text-left text-sm font-semibold text-slate-900">Platform</th>
                <th class="px-6 py-4 text-left text-sm font-semibold text-slate-900">Link</th>
                <th class="px-6 py-4 text-left text-sm font-semibold text-slate-900">Difficulty</th>
                <th class="px-6 py-4 text-left text-sm font-semibold text-slate-900">Points</th>
              </tr>
            </thead>
            <tbody class="divide-y divide-slate-200">
              <tr class="bg-gradient-to-r from-orange-50 to-amber-50 hover:bg-orange-100 table-row-hover">
                <td class="px-6 py-4 font-semibold text-slate-900">Two Sum</td>
                <td class="px-6 py-4 text-slate-700">Find indices of two numbers that add up to a target.</td>
                <td class="px-6 py-4 text-orange-700 font-medium">Arrays</td>
                <td class="px-6 py-4">
                  <div class="flex items-center gap-2">
                    <div class="w-8 h-8 bg-gradient-to-br from-orange-400 to-yellow-500 rounded-full flex items-center justify-center text-white font-bold">LC</div>
                    <span class="text-slate-700">LeetCode</span>
                  </div>
                </td>
                <td class="px-6 py-4 text-orange-600 underline"><a href="#" target="_blank">View</a></td>
                <td class="px-6 py-4">
                  <span class="bg-green-100 text-green-700 px-2 py-1 rounded text-xs font-semibold">Easy</span>
                </td>
                <td class="px-6 py-4 font-bold text-orange-600">100</td>
              </tr>
              <tr class="bg-gradient-to-r from-blue-50 to-indigo-50 hover:bg-blue-100 table-row-hover">
                <td class="px-6 py-4 font-semibold text-slate-900">Reverse Linked List</td>
                <td class="px-6 py-4 text-slate-700">Reverse a singly linked list.</td>
                <td class="px-6 py-4 text-blue-700 font-medium">Linked List</td>
                <td class="px-6 py-4">
                  <div class="flex items-center gap-2">
                    <div class="w-8 h-8 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full flex items-center justify-center text-white font-bold">CF</div>
                    <span class="text-slate-700">Codeforces</span>
                  </div>
                </td>
                <td class="px-6 py-4 text-blue-600 underline"><a href="#" target="_blank">View</a></td>
                <td class="px-6 py-4">
                  <span class="bg-yellow-100 text-yellow-700 px-2 py-1 rounded text-xs font-semibold">Medium</span>
                </td>
                <td class="px-6 py-4 font-bold text-blue-600">200</td>
              </tr>
              <tr class="bg-gradient-to-r from-green-50 to-emerald-50 hover:bg-green-100 table-row-hover">
                <td class="px-6 py-4 font-semibold text-slate-900">Binary Tree Traversal</td>
                <td class="px-6 py-4 text-slate-700">Implement inorder, preorder, and postorder traversal.</td>
                <td class="px-6 py-4 text-green-700 font-medium">Trees</td>
                <td class="px-6 py-4">
                  <div class="flex items-center gap-2">
                    <div class="w-8 h-8 bg-gradient-to-br from-green-400 to-emerald-500 rounded-full flex items-center justify-center text-white font-bold">HR</div>
                    <span class="text-slate-700">HackerRank</span>
                  </div>
                </td>
                <td class="px-6 py-4 text-green-600 underline"><a href="#" target="_blank">View</a></td>
                <td class="px-6 py-4">
                  <span class="bg-red-100 text-red-700 px-2 py-1 rounded text-xs font-semibold">Hard</span>
                </td>
                <td class="px-6 py-4 font-bold text-green-600">300</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- User Detail Modal (hidden by default) -->
    <div id="userDetailModal" class="fixed inset-0 z-50 hidden items-center justify-center modal-bg">
      <div class="bg-white rounded-lg shadow-lg p-8 max-w-lg w-full relative">
        <button onclick="closeUserDetailModal()" class="absolute top-2 right-2 text-slate-400 hover:text-slate-700">
          <i data-lucide="x" class="w-5 h-5"></i>
        </button>
        <h3 class="text-xl font-bold mb-4">User Details - <span id="modalUserName"></span></h3>
        <table class="w-full mb-4">
          <thead>
            <tr>
              <th class="px-4 py-2 text-left text-xs font-semibold text-slate-900">Problem No</th>
              <th class="px-4 py-2 text-left text-xs font-semibold text-slate-900">Problem</th>
              <th class="px-4 py-2 text-left text-xs font-semibold text-slate-900">Topic</th>
              <th class="px-4 py-2 text-left text-xs font-semibold text-slate-900">Flagged</th>
              <th class="px-4 py-2 text-left text-xs font-semibold text-slate-900">Solved</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="px-4 py-2">1</td>
              <td class="px-4 py-2">Two Sum</td>
              <td class="px-4 py-2">Arrays</td>
              <td class="px-4 py-2">No</td>
              <td class="px-4 py-2">Yes</td>
            </tr>
            <tr>
              <td class="px-4 py-2">2</td>
              <td class="px-4 py-2">Reverse Linked List</td>
              <td class="px-4 py-2">Linked List</td>
              <td class="px-4 py-2">Yes</td>
              <td class="px-4 py-2">No</td>
            </tr>
            <tr>
              <td class="px-4 py-2">3</td>
              <td class="px-4 py-2">Binary Tree Traversal</td>
              <td class="px-4 py-2">Trees</td>
              <td class="px-4 py-2">No</td>
              <td class="px-4 py-2">Yes</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

        <!-- Flagged Questions Summary Modal (hidden by default) -->
    <div id="flaggedSummaryModal" class="fixed inset-0 z-50 hidden items-center justify-center modal-bg">
      <div class="bg-white rounded-xl shadow-2xl p-8 max-w-2xl w-full relative">
        <button onclick="closeFlaggedSummaryModal()" class="absolute top-4 right-4 text-slate-400 hover:text-slate-700">
          <i data-lucide="x" class="w-5 h-5"></i>
        </button>
        
        <div class="mb-6">
          <div class="flex items-center gap-3 mb-2">
            <div class="w-10 h-10 bg-gradient-to-br from-orange-500 to-red-500 rounded-full flex items-center justify-center text-white font-bold">
              <i data-lucide="flag" class="w-5 h-5"></i>
            </div>
            <div>
              <h3 class="text-2xl font-bold text-slate-900">Flagged Questions Summary</h3>
              <p class="text-slate-600">Review flagged problems for <span id="modalFlaggedUser" class="font-semibold text-orange-600">Student #3</span></p>
            </div>
          </div>
        </div>
        
        <div class="mb-6">
          <div class="bg-gradient-to-r from-orange-50 to-red-50 rounded-lg p-4 border border-orange-200">
            <div class="text-center">
              <div class="text-3xl font-bold text-red-600" id="flaggedCount">2</div>
              <div class="text-slate-600">Total Flagged Questions</div>
            </div>
          </div>
        </div>
        
        <div class="space-y-3">
          <h4 class="text-lg font-semibold text-slate-900 mb-3">Flagged Questions:</h4>
          
          <!-- Question 1 -->
          <div class="bg-gradient-to-r from-orange-50 to-red-50 rounded-lg p-4 border border-orange-200 hover:bg-orange-100 cursor-pointer transition-colors" onclick="openFlaggedDetailModal(1)">
            <div class="flex items-center justify-between">
              <div class="flex items-center gap-3">
                <span class="bg-red-100 text-red-700 px-3 py-1 rounded-full text-sm font-semibold">#1</span>
                <div>
                  <div class="font-semibold text-slate-900">Reverse Linked List</div>
                  <div class="text-sm text-slate-600">Problem 2 • Linked List</div>
                </div>
              </div>
              <div class="text-sm text-slate-500">2 hours ago</div>
            </div>
          </div>
          
          <!-- Question 2 -->
          <div class="bg-gradient-to-r from-orange-50 to-red-50 rounded-lg p-4 border border-orange-200 hover:bg-orange-100 cursor-pointer transition-colors" onclick="openFlaggedDetailModal(2)">
            <div class="flex items-center justify-between">
              <div class="flex items-center gap-3">
                <span class="bg-red-100 text-red-700 px-3 py-1 rounded-full text-sm font-semibold">#2</span>
                <div>
                  <div class="font-semibold text-slate-900">Two Sum</div>
                  <div class="text-sm text-slate-600">Problem 1 • Arrays</div>
                </div>
              </div>
              <div class="text-sm text-slate-500">1 hour ago</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Flagged Question Detail Modal (hidden by default) -->
    <div id="flaggedDetailModal" class="fixed inset-0 z-50 hidden items-center justify-center modal-bg">
      <div class="bg-white rounded-xl shadow-2xl p-8 max-w-4xl w-full relative">
        <button onclick="closeFlaggedDetailModal()" class="absolute top-4 right-4 text-slate-400 hover:text-slate-700">
          <i data-lucide="x" class="w-5 h-5"></i>
        </button>
        
        <div class="mb-6">
          <div class="flex items-center gap-3 mb-2">
            <div class="w-10 h-10 bg-gradient-to-br from-orange-500 to-red-500 rounded-full flex items-center justify-center text-white font-bold">
              <i data-lucide="flag" class="w-5 h-5"></i>
            </div>
            <div>
              <h3 class="text-2xl font-bold text-slate-900">Flagged Question Details</h3>
              <p class="text-slate-600">Reviewing <span id="detailQuestionName" class="font-semibold text-orange-600">Question</span> for <span id="detailUserName" class="font-semibold text-orange-600">Student</span></p>
            </div>
          </div>
        </div>
        
        <div id="flaggedQuestionContent" class="space-y-4">
          <!-- Content will be dynamically loaded -->
        </div>
      </div>
    </div>

    <!-- Add Task Modal (hidden by default) -->
    <div id="addTaskModal" class="fixed inset-0 z-50 hidden items-center justify-center modal-bg">
      <div class="bg-white rounded-xl shadow-2xl p-8 max-w-lg w-full relative">
        <button onclick="closeAddTaskModal()" class="absolute top-2 right-2 text-slate-400 hover:text-slate-700">
          <i data-lucide="x" class="w-5 h-5"></i>
        </button>
        <h3 class="text-2xl font-bold mb-6 text-slate-900 flex items-center gap-2">
          <i data-lucide="plus-circle" class="w-6 h-6 text-orange-600"></i> Add New Task
        </h3>
        <form id="addTaskForm" class="space-y-4">
          <div>
            <label class="block text-sm font-medium text-slate-700 mb-1">Title</label>
            <input type="text" name="title" required class="w-full border border-slate-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-orange-400 outline-none" />
          </div>
          <div>
            <label class="block text-sm font-medium text-slate-700 mb-1">Description</label>
            <textarea name="description" required class="w-full border border-slate-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-orange-400 outline-none"></textarea>
          </div>
          <div class="grid grid-cols-2 gap-4">
            <div>
              <label class="block text-sm font-medium text-slate-700 mb-1">Topic</label>
              <input type="text" name="topic" required class="w-full border border-slate-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-orange-400 outline-none" />
            </div>
            <div>
              <label class="block text-sm font-medium text-slate-700 mb-1">Platform</label>
              <input type="text" name="platform" required class="w-full border border-slate-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-orange-400 outline-none" />
            </div>
          </div>
          <div class="grid grid-cols-2 gap-4">
            <div>
              <label class="block text-sm font-medium text-slate-700 mb-1">Link</label>
              <input type="url" name="link" required class="w-full border border-slate-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-orange-400 outline-none" />
            </div>
            <div>
              <label class="block text-sm font-medium text-slate-700 mb-1">Difficulty</label>
              <select name="difficulty" required class="w-full border border-slate-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-orange-400 outline-none">
                <option value="Easy">Easy</option>
                <option value="Medium">Medium</option>
                <option value="Hard">Hard</option>
              </select>
            </div>
          </div>
          <div>
            <label class="block text-sm font-medium text-slate-700 mb-1">Points</label>
            <input type="number" name="points" min="0" required class="w-full border border-slate-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-orange-400 outline-none" />
          </div>
          <div class="flex justify-end mt-6">
            <button type="button" onclick="closeAddTaskModal()" class="mr-3 px-4 py-2 rounded-lg border border-slate-300 text-slate-700 hover:bg-slate-50">Cancel</button>
            <button type="submit" class="glass-btn bg-orange-600 text-white px-6 py-2 rounded-lg hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-orange-400">Save Task</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Leaderboard Modal (hidden by default) -->
    <div id="leaderboardModal" class="fixed inset-0 z-50 hidden items-center justify-center modal-bg">
      <div class="bg-white rounded-xl shadow-2xl p-8 max-w-4xl w-full relative">
        <button onclick="closeLeaderboardModal()" class="absolute top-2 right-2 text-slate-400 hover:text-slate-700">
          <i data-lucide="x" class="w-5 h-5"></i>
        </button>
        <h3 class="text-2xl font-bold mb-6 text-slate-900 flex items-center gap-2">
          <i data-lucide="bar-chart-3" class="w-6 h-6 text-orange-600"></i> Contest Leaderboard
        </h3>
        <div class="flex justify-end mb-4">
          <a href="mentor-contest-leaderboard.html?contest=ALGO" class="glass-btn bg-orange-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-orange-700">
            <i data-lucide="bar-chart-3" class="w-4 h-4"></i> View Full Leaderboard
          </a>
        </div>
        <div class="overflow-x-auto">
          <table class="w-full">
            <thead class="bg-slate-50 border-b border-slate-200">
              <tr>
                <th class="px-6 py-4 text-left text-sm font-semibold text-slate-900">Rank</th>
                <th class="px-6 py-4 text-left text-sm font-semibold text-slate-900">Name</th>
                <th class="px-6 py-4 text-left text-sm font-semibold text-slate-900">Problems Solved</th>
                <th class="px-6 py-4 text-left text-sm font-semibold text-slate-900">Flagged</th>
              </tr>
            </thead>
            <tbody class="divide-y divide-slate-200">
              <!-- Top 1 -->
              <tr class="bg-gradient-to-r from-yellow-50 to-amber-50 hover:bg-yellow-100 table-row-hover">
                <td class="px-6 py-4">
                  <div class="w-8 h-8 bg-gradient-to-br from-yellow-400 to-amber-500 rounded-full flex items-center justify-center text-white font-bold text-sm">1</div>
                </td>
                <td class="px-6 py-4">
                  <div class="flex items-center gap-3">
                    <div class="w-8 h-8 bg-gradient-to-br from-amber-400 to-orange-500 rounded-full flex items-center justify-center text-white font-semibold">P</div>
                    <div>
                      <div class="font-semibold text-slate-900">Priya Sharma</div>
                      <div class="text-xs text-slate-500">@priyasharma</div>
                    </div>
                  </div>
                </td>
                <td class="px-6 py-4 font-semibold text-slate-900">3/3</td>
                <td class="px-6 py-4">
                  <span class="bg-red-100 text-red-700 px-2 py-1 rounded text-xs cursor-pointer" onclick="showFlaggedModal('Priya Sharma')">2</span>
                </td>
              </tr>
              <!-- Top 2 -->
              <tr class="bg-gradient-to-r from-slate-50 to-gray-50 hover:bg-slate-100 table-row-hover">
                <td class="px-6 py-4">
                  <div class="w-8 h-8 bg-gradient-to-br from-slate-400 to-gray-500 rounded-full flex items-center justify-center text-white font-bold text-sm">2</div>
                </td>
                <td class="px-6 py-4">
                  <div class="flex items-center gap-3">
                    <div class="w-8 h-8 bg-gradient-to-br from-slate-400 to-gray-500 rounded-full flex items-center justify-center text-white font-semibold">R</div>
                    <div>
                      <div class="font-semibold text-slate-900">Rahul Kumar</div>
                      <div class="text-xs text-slate-500">@rahulkumar</div>
                    </div>
                  </div>
                </td>
                <td class="px-6 py-4 font-semibold text-slate-900">3/3</td>
                <td class="px-6 py-4">
                  <span class="bg-orange-100 text-orange-700 px-2 py-1 rounded text-xs cursor-pointer" onclick="showFlaggedModal('Rahul Kumar')">1</span>
                </td>
              </tr>
              <!-- Top 3 -->
              <tr class="bg-gradient-to-r from-orange-50 to-amber-50 hover:bg-orange-100 table-row-hover">
                <td class="px-6 py-4">
                  <div class="w-8 h-8 bg-orange-600 rounded-full flex items-center justify-center text-white font-bold text-sm">3</div>
                </td>
                <td class="px-6 py-4">
                  <div class="flex items-center gap-3">
                    <div class="w-8 h-8 bg-gradient-to-br from-orange-400 to-amber-500 rounded-full flex items-center justify-center text-white font-semibold">A</div>
                    <div>
                      <div class="font-semibold text-slate-900">Amit Patel</div>
                      <div class="text-xs text-slate-500">@amitpatel</div>
                    </div>
                  </div>
                </td>
                <td class="px-6 py-4 font-semibold text-slate-900">2/3</td>
                <td class="px-6 py-4">
                  <span class="bg-green-100 text-green-700 px-2 py-1 rounded text-xs cursor-pointer" onclick="showFlaggedModal('Amit Patel')">0</span>
                </td>
              </tr>
              <!-- More participants -->
              <tr class="hover:bg-slate-50 table-row-hover">
                <td class="px-6 py-4">
                  <div class="w-8 h-8 bg-slate-300 rounded-full flex items-center justify-center text-slate-600 font-bold text-sm">4</div>
                </td>
                <td class="px-6 py-4">
                  <div class="flex items-center gap-3">
                    <div class="w-8 h-8 bg-gradient-to-br from-green-400 to-emerald-500 rounded-full flex items-center justify-center text-white font-semibold">N</div>
                    <div>
                      <div class="font-semibold text-slate-900">Neha Singh</div>
                      <div class="text-xs text-slate-500">@nehasingh</div>
                    </div>
                  </div>
                </td>
                <td class="px-6 py-4 font-semibold text-slate-900">1/3</td>
                <td class="px-6 py-4">
                  <span class="bg-red-100 text-red-700 px-2 py-1 rounded text-xs cursor-pointer" onclick="showFlaggedModal('Neha Singh')">1</span>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

  </main>
  <!-- Load API and App scripts -->
  <script type="module" src="../../js/apiService.js"></script>
  <script type="module" src="../../js/apiService.js"></script>
  <script type="module" src="../../js/core/bootstrap.js"></script>

  <script>
    lucide.createIcons();
    
    // Simple page functionality
    document.addEventListener('DOMContentLoaded', () => {
      // Set mentor name in navbar
      const navbarMentorName = document.getElementById('navbar-mentor-name');
      if (navbarMentorName) {
        navbarMentorName.textContent = 'Dr. Sarah Chen';
      }
      
      // Setup event listeners
      setupEventListeners();
    });
    
    function setupEventListeners() {
      // Add Task Modal logic
      const addTaskBtn = document.getElementById('addTaskBtn');
      const addTaskModal = document.getElementById('addTaskModal');
      const addTaskForm = document.getElementById('addTaskForm');
      const leaderboardBtn = document.getElementById('leaderboardBtn');
      const leaderboardModal = document.getElementById('leaderboardModal');

      if (addTaskBtn) {
        addTaskBtn.addEventListener('click', () => openAddTaskModal());
      }

      if (addTaskForm) {
        addTaskForm.addEventListener('submit', (e) => handleAddTask(e));
      }

      if (leaderboardBtn) {
        leaderboardBtn.addEventListener('click', () => openLeaderboardModal());
      }
    }

    function openAddTaskModal() {
      const addTaskModal = document.getElementById('addTaskModal');
      if (addTaskModal) {
        addTaskModal.classList.remove('hidden');
        addTaskModal.classList.add('flex');
      }
    }

    function closeAddTaskModal() {
      const addTaskModal = document.getElementById('addTaskModal');
      const addTaskForm = document.getElementById('addTaskForm');
      
      if (addTaskModal) {
        addTaskModal.classList.add('hidden');
        addTaskModal.classList.remove('flex');
      }
      
      if (addTaskForm) {
        addTaskForm.reset();
      }
    }

    async function handleAddTask(e) {
      e.preventDefault();
      
      try {
        const formData = new FormData(e.target);
        const questionData = {
          title: formData.get('title'),
          description: formData.get('description'),
          topic: formData.get('topic'),
          platform: formData.get('platform'),
          link: formData.get('link'),
          difficulty: formData.get('difficulty'),
          points: parseInt(formData.get('points'))
        };

        // TODO: Implement API call to add task
        console.log('Adding task:', taskData);
        
        showSuccess('Task added successfully!');
        closeAddTaskModal();
        
        // Reload the page to show new task
        setTimeout(() => {
          location.reload();
        }, 1000);
        
      } catch (error) {
        console.error('Failed to add task:', error);
        showError('An error occurred while adding the task');
      }
    }

    function openLeaderboardModal() {
      const leaderboardModal = document.getElementById('leaderboardModal');
      if (leaderboardModal) {
        leaderboardModal.classList.remove('hidden');
        leaderboardModal.classList.add('flex');
      }
    }

    function closeLeaderboardModal() {
      const leaderboardModal = document.getElementById('leaderboardModal');
      if (leaderboardModal) {
        leaderboardModal.classList.add('hidden');
        leaderboardModal.classList.remove('flex');
      }
    }

    // Modal functions
    function showUserDetailModal(userName) {
      document.getElementById('modalUserName').textContent = userName;
      document.getElementById('userDetailModal').classList.remove('hidden');
      document.getElementById('userDetailModal').classList.add('flex');
    }

    function closeUserDetailModal() {
      document.getElementById('userDetailModal').classList.add('hidden');
      document.getElementById('userDetailModal').classList.remove('flex');
    }

         function showFlaggedModal(userName) {
       document.getElementById('modalFlaggedUser').textContent = userName;
       closeLeaderboardModal();
       setTimeout(() => {
         document.getElementById('flaggedSummaryModal').classList.remove('hidden');
         document.getElementById('flaggedSummaryModal').classList.add('flex');
       }, 200);
     }
 
     function closeFlaggedSummaryModal() {
       document.getElementById('flaggedSummaryModal').classList.add('hidden');
       document.getElementById('flaggedSummaryModal').classList.remove('flex');
     }

     // Load contest questions dynamically
     async function loadContestQuestions(contestId) {
       try {
         console.log('Loading questions for contest:', contestId);
         showQuestionsLoadingState();
         const response = await window.SkillPortAPI.getContest(contestId);
         if (response.success && response.data.questions) {
           displayContestQuestions(response.data.questions);
         } else {
           console.error('Failed to load questions:', response.message);
           showStaticQuestions();
         }
       } catch (error) {
         console.error('Error loading questions:', error);
         showStaticQuestions();
       }
     }

     function displayContestQuestions(questions) {
       const questionsTable = document.querySelector('tbody.divide-y.divide-slate-200');
       if (!questionsTable) return;

       if (questions.length === 0) {
         questionsTable.innerHTML = `
           <tr>
             <td colspan="7" class="px-6 py-8 text-center">
               <div class="w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4">
                 <i data-lucide="help-circle" class="w-8 h-8 text-slate-400"></i>
               </div>
               <h3 class="text-lg font-semibold text-slate-700 mb-2">No Questions Yet</h3>
               <p class="text-slate-500">Add your first question to get started!</p>
             </td>
           </tr>
         `;
         lucide.createIcons();
         return;
       }

       questionsTable.innerHTML = questions.map(question => createQuestionRow(question)).join('');
       lucide.createIcons();
     }

     function createQuestionRow(question) {
       const difficultyColor = getDifficultyColor(question.difficulty);
       const platformIcon = getPlatformIcon(question.platform);
       
       return `
         <tr class="bg-gradient-to-r from-orange-50 to-amber-50 hover:bg-orange-100 table-row-hover">
           <td class="px-6 py-4 font-semibold text-slate-900">${question.title}</td>
           <td class="px-6 py-4 text-slate-700">${question.description}</td>
           <td class="px-6 py-4 text-orange-700 font-medium">${question.topic}</td>
           <td class="px-6 py-4">
             <div class="flex items-center gap-2">
               <div class="w-8 h-8 bg-gradient-to-br from-orange-400 to-yellow-500 rounded-full flex items-center justify-center text-white font-bold">${platformIcon}</div>
               <span class="text-slate-700">${question.platform}</span>
             </div>
           </td>
           <td class="px-6 py-4 text-orange-600 underline"><a href="${question.link}" target="_blank">View</a></td>
           <td class="px-6 py-4">
             <span class="bg-${difficultyColor}-100 text-${difficultyColor}-700 px-2 py-1 rounded text-xs font-semibold">${question.difficulty}</span>
           </td>
           <td class="px-6 py-4 font-bold text-orange-600">${question.points}</td>
         </tr>
       `;
     }

     function showQuestionsLoadingState() {
       const questionsTable = document.querySelector('tbody.divide-y.divide-slate-200');
       if (!questionsTable) return;
       questionsTable.innerHTML = `
         <tr>
           <td colspan="7" class="px-6 py-8 text-center">
             <div class="w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4 animate-spin">
               <i data-lucide="loader-2" class="w-8 h-8 text-slate-400"></i>
             </div>
             <h3 class="text-lg font-semibold text-slate-700 mb-2">Loading Questions...</h3>
             <p class="text-slate-500">Please wait while we fetch the contest questions</p>
           </td>
         </tr>
       `;
       lucide.createIcons();
     }

     function showStaticQuestions() {
       // Keep existing static content as fallback
       console.log('Showing static questions as fallback');
     }

     function getDifficultyColor(difficulty) {
       switch(difficulty) {
         case 'Easy': return 'green';
         case 'Medium': return 'yellow';
         case 'Hard': return 'red';
         default: return 'gray';
       }
     }

     function getPlatformIcon(platform) {
       switch(platform.toLowerCase()) {
         case 'leetcode': return 'LC';
         case 'hackerrank': return 'HR';
         case 'codeforces': return 'CF';
         case 'geeksforgeeks': return 'GFG';
         default: return platform.charAt(0).toUpperCase();
       }
     }
 
     function openFlaggedDetailModal(questionId) {
       // Close summary modal
       closeFlaggedSummaryModal();
       
       // Set question details
       const questionData = getQuestionData(questionId);
       document.getElementById('detailQuestionName').textContent = questionData.name;
       document.getElementById('detailUserName').textContent = document.getElementById('modalFlaggedUser').textContent;
       
       // Load question content
       loadQuestionContent(questionId);
       
       // Show detail modal
       setTimeout(() => {
         document.getElementById('flaggedDetailModal').classList.remove('hidden');
         document.getElementById('flaggedDetailModal').classList.add('flex');
       }, 200);
     }
 
     function closeFlaggedDetailModal() {
       document.getElementById('flaggedDetailModal').classList.add('hidden');
       document.getElementById('flaggedDetailModal').classList.remove('flex');
     }
 
     function getQuestionData(questionId) {
       const questions = {
         1: {
           name: 'Reverse Linked List',
           problemNo: 2,
           topic: 'Linked List',
           submitted: '2 hours ago',
           code: `function reverseList(head) {
     let prev = null;
     let current = head;
     
     while (current !== null) {
         let next = current.next;
         current.next = prev;
         prev = current;
         current = next;
     }
     
     return prev;
 }`
         },
         2: {
           name: 'Two Sum',
           problemNo: 1,
           topic: 'Arrays',
           submitted: '1 hour ago',
           code: `function twoSum(nums, target) {
     const map = new Map();
     
     for (let i = 0; i < nums.length; i++) {
         const complement = target - nums[i];
         if (map.has(complement)) {
             return [map.get(complement), i];
         }
         map.set(nums[i], i);
     }
     
     return [];
 }`
         }
       };
       return questions[questionId] || {};
     }
 
     function loadQuestionContent(questionId) {
       const questionData = getQuestionData(questionId);
       const contentContainer = document.getElementById('flaggedQuestionContent');
       
       contentContainer.innerHTML = `
         <div class="bg-gradient-to-r from-orange-50 to-red-50 rounded-lg p-6 border border-orange-200">
           <div class="flex items-center justify-between mb-4">
             <div class="flex items-center gap-3">
               <span class="bg-red-100 text-red-700 px-3 py-1 rounded-full text-sm font-semibold">Flagged #${questionId}</span>
               <span class="text-slate-600">•</span>
               <span class="text-slate-600">Problem ${questionData.problemNo}</span>
             </div>
             <div class="text-sm text-slate-500">Submitted ${questionData.submitted}</div>
           </div>
           
           <div class="grid grid-cols-3 gap-4 mb-4">
             <div class="text-center">
               <div class="text-2xl font-bold text-red-600">${questionData.problemNo}</div>
               <div class="text-sm text-slate-600">Problem No</div>
             </div>
             <div class="text-center">
               <div class="text-lg font-semibold text-slate-900">${questionData.name}</div>
               <div class="text-sm text-slate-600">Problem Name</div>
             </div>
             <div class="text-center">
               <div class="text-lg font-semibold text-orange-700">${questionData.topic}</div>
               <div class="text-sm text-slate-600">Topic</div>
             </div>
           </div>
           
           <div class="mb-4">
             <label class="block text-sm font-medium text-slate-700 mb-2">Submitted Code:</label>
             <div class="bg-slate-900 rounded-lg p-4 overflow-x-auto">
               <pre class="text-green-400 text-sm font-mono">${questionData.code}</pre>
             </div>
           </div>
           
           <div class="flex gap-3">
             <button class="flex-1 bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700 transition-colors">
               <i data-lucide="check" class="w-4 h-4 inline mr-2"></i>Approve
             </button>
             <button class="flex-1 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors">
               <i data-lucide="x" class="w-4 h-4 inline mr-2"></i>Reject
             </button>
             <button class="flex-1 bg-slate-600 text-white px-4 py-2 rounded-lg hover:bg-slate-700 transition-colors">
               <i data-lucide="message-circle" class="w-4 h-4 inline mr-2"></i>Comment
             </button>
           </div>
         </div>
       `;
     }

    // Utility functions
    function showSuccess(message) {
      showNotification(message, 'success');
    }

    function showError(message) {
      showNotification(message, 'error');
    }

    function showNotification(message, type = 'info') {
      const notification = document.createElement('div');
      notification.className = `fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg ${
        type === 'success' ? 'bg-green-500 text-white' :
        type === 'error' ? 'bg-red-500 text-white' :
        'bg-orange-500 text-white'
      }`;
      notification.textContent = message;

      document.body.appendChild(notification);

      setTimeout(() => {
        notification.remove();
      }, 3000);
    }

    // Initialize page functionality
    document.addEventListener('DOMContentLoaded', () => {
      // Set mentor name in navbar
      const navbarMentorName = document.getElementById('navbar-mentor-name');
      if (navbarMentorName) {
        navbarMentorName.textContent = 'Dr. Sarah Chen';
      }
      
      // Get contest ID from URL and load questions
      const urlParams = new URLSearchParams(window.location.search);
      const contestId = urlParams.get('contest') || 'ALGO';
      loadContestQuestions(contestId);
      
      // Add event listeners
      const addTaskBtn = document.querySelector('button[onclick="openAddTaskModal()"]');
      if (addTaskBtn) {
        addTaskBtn.addEventListener('click', () => openAddTaskModal());
      }
      
      const addTaskForm = document.getElementById('addTaskForm');
      if (addTaskForm) {
        addTaskForm.addEventListener('submit', (e) => handleAddTask(e));
      }
      
      const leaderboardBtn = document.querySelector('button[onclick="openLeaderboardModal()"]');
      if (leaderboardBtn) {
        leaderboardBtn.addEventListener('click', () => openLeaderboardModal());
      }
    });
  </script>
</body>
</html> 