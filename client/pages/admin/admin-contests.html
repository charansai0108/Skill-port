<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Contest Management - SkillPort Admin</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <link href="../../css/tailwind.min.css" rel="stylesheet">
  <script type="module" src="https://unpkg.com/lucide@latest/dist/umd/lucide.min.js"></script>
  <script type="module" src="../../js/apiService.js"></script>
  <script type="module" src="../../js/core/notifications.js"></script>
  <script type="module" src="../../js/core/authManager.js"></script>
  <script type="module" src="../../js/core/contextManager.js"></script>
  <script type="module" src="../../js/core/dataLoader.js"></script>
  <script type="module" src="../../js/core/uiHelpers.js"></script>
  <script type="module" src="../../js/controllers/core/pageController.js"></script>
  <script type="module" src="../../js/controllers/admin/adminContestsController.js"></script>
  <style>
    body { 
      font-family: 'Inter', sans-serif; 
    }
    
    /* Enhanced transitions and animations */
    .nav-link {
      transition: all 0.3s ease-in-out;
    }
    
    .nav-link:hover {
      transform: translateY(-2px);
    }
    
    .contest-card {
      transition: all 0.3s ease-in-out;
      animation: fadeInUp 0.6s ease-out;
      border-radius: 0.75rem;
    }
    
    .contest-card:hover {
      transform: translateY(-2px) scale(1.02);
      box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
    }
    
    .stat-card {
      transition: all 0.3s ease-in-out;
      animation: fadeInUp 0.6s ease-out;
    }
    
    .stat-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
    }
    
    .action-button {
      transition: all 0.3s ease-in-out;
    }
    
    .action-button:hover {
      transform: scale(1.05);
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
    }
    
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    /* Staggered animation delays */
    .stat-card:nth-child(1) { animation-delay: 0.1s; }
    .stat-card:nth-child(2) { animation-delay: 0.2s; }
    .stat-card:nth-child(3) { animation-delay: 0.3s; }
    
    /* Page transition effects */
    .page-content {
      animation: slideIn 0.5s ease-out;
    }
    
    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateX(-20px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }
    
    /* Enhanced form styling */
    .form-input:focus {
      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
    }
    
    /* Enhanced form input hover effects - EXACT same as admin-dashboard */
    .form-input {
      transition: all 0.2s ease !important;
      border: 3px solid transparent !important;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06) !important;
    }
    
    .form-input:hover {
      transform: translateY(-2px) !important;
      border-color: rgba(59, 130, 246, 0.4) !important;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15), 0 2px 4px rgba(0, 0, 0, 0.1) !important;
    }
    
    .form-input:focus {
      border-color: rgba(59, 130, 246, 0.7) !important;
      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1) !important;
    }
    
    /* Enhanced modal hover effects */
    .modal-content {
      transition: all 0.3s ease;
      border: 2px solid transparent;
    }
    
    .modal-content:hover {
      border-color: rgba(59, 130, 246, 0.2);
      box-shadow: 0 8px 32px rgba(31, 38, 135, 0.15);
    }
    
    /* Hide scrollbar */
    .modal-content::-webkit-scrollbar {
      display: none;
    }
    
    .modal-content {
      -ms-overflow-style: none;
      scrollbar-width: none;
    }
    
    /* Dropdown options background styling */
    select option {
      background-color: #f8fafc;
      color: #1e293b;
      padding: 8px 12px;
    }
    
    select option:hover {
      background-color: #e2e8f0;
    }
    
    select option:checked {
      background-color: #3b82f6;
      color: white;
    }
    
    /* Loading states */
    .loading-pulse {
      animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
    }
    
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }
    
    /* Mobile menu */
    .mobile-menu {
      transform: translateX(-100%);
      transition: transform 0.3s ease-in-out;
    }
    
    .mobile-menu.open {
      transform: translateX(0);
    }
    
    /* Contest card improvements */
    .contest-card {
      min-height: 400px;
      display: flex;
      flex-direction: column;
    }
    
    .contest-card .flex.gap-3 {
      margin-top: auto;
    }
    
    /* Contest card hover effects - SAME border style as form inputs */
    .contest-card {
      transition: all 0.2s ease !important;
      border: 3px solid transparent !important;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06) !important;
    }
    
    .contest-card:hover {
      transform: translateY(-2px) !important;
      border-color: rgba(59, 130, 246, 0.4) !important;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15), 0 2px 4px rgba(0, 0, 0, 0.1) !important;
    }
    
    /* Stats cards hover effects - SAME border style as form inputs */
    .stat-card {
      transition: all 0.2s ease !important;
      border: 3px solid transparent !important;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06) !important;
    }
    
    .stat-card:hover {
      transform: translateY(-2px) !important;
      border-color: rgba(59, 130, 246, 0.4) !important;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15), 0 2px 4px rgba(0, 0, 0, 0.1) !important;
    }
    
    /* Better mobile touch targets */
    @media (max-width: 768px) {
      .mobile-touch-target {
        min-height: 44px;
        min-width: 44px;
      }
    }
  </style>
</head>
<body class="bg-gradient-to-br from-slate-50 via-white to-blue-50 min-h-screen">
  <!-- Mobile Menu Button -->
  <div class="lg:hidden fixed top-4 left-4 z-50">
    <button id="mobileMenuBtn" class="bg-white/90 backdrop-blur-sm p-2 rounded-lg shadow-lg border border-slate-200">
      <i data-lucide="menu" class="w-5 h-5 text-slate-700"></i>
    </button>
  </div>

  <!-- Mobile Sidebar -->
  <div id="mobileSidebar" class="mobile-menu lg:hidden fixed inset-0 z-40 bg-white shadow-2xl">
    <div class="flex items-center justify-between p-6 border-b border-slate-200">
      <h3 class="text-lg font-semibold text-slate-900">Admin Navigation</h3>
      <button id="closeMobileMenu" class="text-slate-400 hover:text-slate-600">
        <i data-lucide="x" class="w-6 h-6"></i>
      </button>
    </div>
    <div class="p-6">
      <nav class="space-y-3" id="mobileNav">
        <!-- Mobile navigation items will be populated by JavaScript -->
      </nav>
    </div>
  </div>

  <!-- Navbar -->
  <nav class="sticky top-0 z-30 bg-white/90 backdrop-blur-xl border-b border-slate-200/50 shadow-sm">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex justify-between items-center h-16">
        <div class="flex items-center gap-2 group">
          <div class="w-8 h-8 bg-gradient-to-br from-red-600 to-pink-600 rounded-lg flex items-center justify-center group-hover:scale-105 transition-transform">
            <i data-lucide="shield" class="w-5 h-5 text-white"></i>
          </div>
          <span class="text-xl font-bold bg-gradient-to-r from-slate-900 to-slate-600 bg-clip-text text-transparent">
            PW IOI
          </span>
        </div>
        <div class="hidden md:flex items-center gap-1">
          <a href="admin-dashboard.html" class="nav-link flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium text-slate-600 hover:text-slate-900 hover:bg-slate-50">
            <i data-lucide="layout-dashboard" class="w-4 h-4"></i> Dashboard
          </a>
          <a href="admin-users.html" class="nav-link flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium text-slate-600 hover:text-slate-900 hover:bg-slate-50">
            <i data-lucide="users" class="w-4 h-4"></i> Students
          </a>
          <a href="admin-mentors.html" class="nav-link flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium text-slate-600 hover:text-slate-900 hover:bg-slate-50">
            <i data-lucide="graduation-cap" class="w-4 h-4"></i> Mentors
          </a>
          <a href="admin-contests.html" class="nav-link flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium bg-red-50 text-red-700 shadow-sm">
            <i data-lucide="trophy" class="w-4 h-4"></i> Contests
          </a>
          <a href="admin-analytics.html" class="nav-link flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium text-slate-600 hover:text-slate-900 hover:bg-slate-50">
            <i data-lucide="bar-chart-3" class="w-4 h-4"></i> Analytics
          </a>
          <a href="admin-leaderboard.html" class="nav-link flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium text-slate-600 hover:text-slate-900 hover:bg-slate-50">
            <i data-lucide="award" class="w-4 h-4"></i> Leaderboard
          </a>
          <a href="admin-profile.html" class="nav-link flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium text-slate-600 hover:text-slate-900 hover:bg-slate-50">
            <img src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=32&h=32&fit=crop&crop=face" alt="Profile" class="w-8 h-8 rounded-full object-cover shadow-lg border-2 border-white">
          </a>
        </div>
      </div>
    </div>
  </nav>

  <!-- Main Content -->
  <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10 page-content">
    <div class="mb-8">
      <div class="flex items-center gap-3">
        <div class="w-10 h-10 bg-gradient-to-br from-red-600 to-pink-600 rounded-xl flex items-center justify-center shadow-lg">
          <i data-lucide="trophy" class="w-5 h-5 text-white"></i>
        </div>
        <div>
              <h1 class="text-xl font-semibold text-slate-700">Contest Management</h1>
        </div>
      </div>
    </div>

    <!-- Stats Cards -->
    <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
      <div class="stat-card bg-white rounded-lg shadow-lg p-6 border border-slate-200/50">
        <div class="flex items-center justify-between">
          <div>
            <p class="text-sm font-medium text-slate-600">Total Contests</p>
            <p class="text-2xl font-bold text-slate-900" id="totalContests">24</p>
      </div>
          <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center">
            <i data-lucide="trophy" class="w-6 h-6 text-blue-600"></i>
      </div>
      </div>
    </div>

      <div class="stat-card bg-white rounded-lg shadow-lg p-6 border border-slate-200/50">
        <div class="flex items-center justify-between">
          <div>
            <p class="text-sm font-medium text-slate-600">Active Contests</p>
            <p class="text-2xl font-bold text-slate-900" id="activeContests">8</p>
          </div>
          <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center">
            <i data-lucide="play" class="w-6 h-6 text-green-600"></i>
        </div>
      </div>
    </div>

      <div class="stat-card bg-white rounded-lg shadow-lg p-6 border border-slate-200/50">
        <div class="flex items-center justify-between">
          <div>
            <p class="text-sm font-medium text-slate-600">Upcoming Contests</p>
            <p class="text-2xl font-bold text-slate-900" id="upcomingContests">12</p>
          </div>
          <div class="w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center">
            <i data-lucide="clock" class="w-6 h-6 text-yellow-600"></i>
        </div>
      </div>
    </div>

      <div class="stat-card bg-white rounded-lg shadow-lg p-6 border border-slate-200/50">
        <div class="flex items-center justify-between">
          <div>
            <p class="text-sm font-medium text-slate-600">Completed Contests</p>
            <p class="text-2xl font-bold text-slate-900" id="completedContests">4</p>
            </div>
          <div class="w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center">
            <i data-lucide="check-circle" class="w-6 h-6 text-purple-600"></i>
            </div>
            </div>
            </div>
          </div>

    <!-- Contest Cards Section -->
    <div class="space-y-6">
      <!-- Header with Search and Filters -->
      <div class="bg-white/70 backdrop-blur-md rounded-xl p-6 border border-white/20 shadow-lg">
        <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4">
          <h2 class="text-xl font-semibold text-slate-900">Recent Contests</h2>
          <div class="flex items-center gap-3">
            <div class="relative">
              <i data-lucide="search" class="w-4 h-4 text-slate-400 absolute left-3 top-1/2 transform -translate-y-1/2"></i>
              <input type="text" placeholder="Search contests..." class="pl-10 pr-4 py-2 bg-white/80 backdrop-blur-sm border border-white/30 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50 w-64 transition-all hover:bg-white/90">
            </div>
            <select class="px-3 py-2 bg-white/80 backdrop-blur-sm border border-white/30 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50 transition-all hover:bg-white/90">
              <option value="">All Status</option>
              <option value="active">Active</option>
              <option value="upcoming">Upcoming</option>
              <option value="completed">Completed</option>
            </select>
                      <button onclick="openCreateContestModal()" class="bg-gradient-to-r from-red-500/90 to-orange-500/90 backdrop-blur-sm text-white px-4 py-2 rounded-lg hover:from-red-600/90 hover:to-orange-600/90 transition-all shadow-lg hover:shadow-xl transform hover:scale-105">
            <i data-lucide="plus" class="w-4 h-4 inline mr-2"></i> Create Contest
            </button>
          </div>
        </div>
      </div>

      <!-- Contest Cards Grid -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <!-- Contest Card 1 -->
        <div class="contest-card bg-white/70 backdrop-blur-md rounded-xl shadow-lg p-6 border border-white/20 hover:shadow-xl hover:bg-white/80 transition-all duration-300 transform hover:scale-105">
          <div class="flex items-center justify-between mb-4">
            <div class="w-12 h-12 bg-gradient-to-br from-blue-500/90 to-blue-600/90 backdrop-blur-sm rounded-xl flex items-center justify-center shadow-lg">
              <i data-lucide="code" class="w-6 h-6 text-white"></i>
            </div>
            <span class="inline-flex px-3 py-1 text-xs font-semibold rounded-full bg-green-100/80 backdrop-blur-sm text-green-800 border border-green-200/50">
              Active
            </span>
          </div>
          
          <h4 class="text-lg font-semibold text-slate-900 mb-3">Weekly Algorithm Challenge</h4>
          <p class="text-sm text-slate-600 mb-5 leading-relaxed">Weekly competitive programming contest focusing on algorithms and problem-solving skills.</p>
          
          <!-- Contest Info Grid -->
          <div class="grid grid-cols-2 gap-4 mb-5">
            <!-- Category -->
            <div class="bg-gradient-to-br from-blue-50/80 to-blue-100/60 backdrop-blur-sm rounded-lg p-3 border border-blue-200/30">
              <div class="flex items-center gap-2 mb-1">
                <i data-lucide="tag" class="w-4 h-4 text-blue-600"></i>
                <span class="text-xs font-medium text-blue-700 uppercase tracking-wide">Category</span>
              </div>
              <span class="text-sm font-semibold text-blue-900">Algorithms</span>
            </div>
            
            <!-- Batch -->
            <div class="bg-gradient-to-br from-yellow-50/80 to-yellow-100/60 backdrop-blur-sm rounded-lg p-3 border border-yellow-200/30">
              <div class="flex items-center gap-2 mb-1">
                <i data-lucide="users" class="w-4 h-4 text-yellow-600"></i>
                <span class="text-xs font-medium text-yellow-700 uppercase tracking-wide">Batch</span>
            </div>
              <span class="text-sm font-semibold text-yellow-900" id="contest1-batch">2024-25</span>
          </div>
            
            <!-- Participants -->
            <div class="bg-gradient-to-br from-green-50/80 to-green-100/60 backdrop-blur-sm rounded-lg p-3 border border-green-200/30">
              <div class="flex items-center gap-2 mb-1">
                <i data-lucide="users" class="w-4 h-4 text-green-600"></i>
                <span class="text-xs font-medium text-green-700 uppercase tracking-wide">Participants</span>
            </div>
              <span class="text-sm font-semibold text-green-900" id="contest1-participants">156</span>
            </div>
            
            <!-- Start Date -->
            <div class="bg-gradient-to-br from-purple-50/80 to-purple-100/60 backdrop-blur-sm rounded-lg p-3 border border-purple-200/30">
              <div class="flex items-center gap-2 mb-1">
                <i data-lucide="calendar" class="w-4 h-4 text-purple-600"></i>
                <span class="text-xs font-medium text-purple-700 uppercase tracking-wide">Start Date</span>
            </div>
              <span class="text-sm font-semibold text-purple-900">Jan 15, 2025</span>
            </div>
          </div>
          
          <div class="flex gap-2 w-full">
            <button onclick="editContest('contest1')" class="flex-1 px-4 py-2 bg-gradient-to-r from-blue-500/90 to-blue-600/90 backdrop-blur-sm text-white rounded-lg text-sm hover:from-blue-600/90 hover:to-blue-700/90 transition-all shadow-md hover:shadow-lg transform hover:scale-105">
              Edit
            </button>
            <button onclick="viewContest('contest1')" class="flex-1 px-4 py-2 bg-gradient-to-r from-green-500/90 to-green-600/90 backdrop-blur-sm text-white rounded-lg text-sm hover:from-green-600/90 hover:to-green-700/90 transition-all shadow-md hover:shadow-lg transform hover:scale-105">
              View
            </button>
            <button onclick="deleteContest('contest1')" class="flex-1 px-4 py-2 bg-gradient-to-r from-red-500/90 to-red-600/90 backdrop-blur-sm text-white rounded-lg text-sm hover:from-red-600/90 hover:to-red-700/90 transition-all shadow-md hover:shadow-lg transform hover:scale-105">
              Delete
            </button>
          </div>
        </div>

        <!-- Contest Card 2 -->
        <div class="contest-card bg-white/70 backdrop-blur-md rounded-xl shadow-lg p-6 border border-white/20 hover:shadow-xl hover:bg-white/80 transition-all duration-300 transform hover:scale-105">
          <div class="flex items-center justify-between mb-4">
            <div class="w-12 h-12 bg-gradient-to-br from-purple-500/90 to-purple-600/90 backdrop-blur-sm rounded-xl flex items-center justify-center shadow-lg">
              <i data-lucide="database" class="w-6 h-6 text-white"></i>
            </div>
            <span class="inline-flex px-3 py-1 text-xs font-semibold rounded-full bg-blue-100/80 backdrop-blur-sm text-blue-800 border border-blue-200/50">
              Upcoming
            </span>
          </div>
          
          <h4 class="text-lg font-semibold text-slate-900 mb-3">Data Structures Master</h4>
          <p class="text-sm text-slate-600 mb-5 leading-relaxed">Advanced contest focusing on data structure implementation and optimization.</p>
          
          <!-- Contest Info Grid -->
          <div class="grid grid-cols-2 gap-4 mb-5">
            <!-- Category -->
            <div class="bg-gradient-to-br from-blue-50/80 to-blue-100/60 backdrop-blur-sm rounded-lg p-3 border border-blue-200/30">
              <div class="flex items-center gap-2 mb-1">
                <i data-lucide="tag" class="w-4 h-4 text-blue-600"></i>
                <span class="text-xs font-medium text-blue-700 uppercase tracking-wide">Category</span>
              </div>
              <span class="text-sm font-semibold text-blue-900">Data Structures</span>
      </div>

            <!-- Batch -->
            <div class="bg-gradient-to-br from-yellow-50/80 to-yellow-100/60 backdrop-blur-sm rounded-lg p-3 border border-yellow-200/30">
              <div class="flex items-center gap-2 mb-1">
                <i data-lucide="users" class="w-4 h-4 text-yellow-600"></i>
                <span class="text-xs font-medium text-yellow-700 uppercase tracking-wide">Batch</span>
            </div>
              <span class="text-sm font-semibold text-yellow-900" id="contest2-batch">Spring 2025</span>
          </div>
            
            <!-- Participants -->
            <div class="bg-gradient-to-br from-green-50/80 to-green-100/60 backdrop-blur-sm rounded-lg p-3 border border-green-200/30">
              <div class="flex items-center gap-2 mb-1">
                <i data-lucide="users" class="w-4 h-4 text-green-600"></i>
                <span class="text-xs font-medium text-green-700 uppercase tracking-wide">Participants</span>
            </div>
              <span class="text-sm font-semibold text-green-900" id="contest2-participants">89</span>
            </div>
            
            <!-- Start Date -->
            <div class="bg-gradient-to-br from-purple-50/80 to-purple-100/60 backdrop-blur-sm rounded-lg p-3 border border-purple-200/30">
              <div class="flex items-center gap-2 mb-1">
                <i data-lucide="calendar" class="w-4 h-4 text-purple-600"></i>
                <span class="text-xs font-medium text-purple-700 uppercase tracking-wide">Start Date</span>
            </div>
              <span class="text-sm font-semibold text-purple-900">Jan 22, 2025</span>
            </div>
          </div>
          
          <div class="flex gap-2 w-full">
            <button onclick="editContest('contest2')" class="flex-1 px-4 py-2 bg-gradient-to-r from-blue-500/90 to-blue-600/90 backdrop-blur-sm text-white rounded-lg text-sm hover:from-blue-600/90 hover:to-blue-700/90 transition-all shadow-md hover:shadow-lg transform hover:scale-105">
              Edit
            </button>
            <button onclick="viewContest('contest2')" class="flex-1 px-4 py-2 bg-gradient-to-r from-green-500/90 to-green-600/90 backdrop-blur-sm text-white rounded-lg text-sm hover:from-green-600/90 hover:to-green-700/90 transition-all shadow-md hover:shadow-lg transform hover:scale-105">
              View
            </button>
            <button onclick="deleteContest('contest2')" class="flex-1 px-4 py-2 bg-gradient-to-r from-red-500/90 to-red-600/90 backdrop-blur-sm text-white rounded-lg text-sm hover:from-red-600/90 hover:to-red-700/90 transition-all shadow-md hover:shadow-lg transform hover:scale-105">
              Delete
            </button>
          </div>
        </div>

        <!-- Contest Card 3 -->
        <div class="contest-card bg-white/70 backdrop-blur-md rounded-xl shadow-lg p-6 border border-white/20 hover:shadow-xl hover:bg-white/80 transition-all duration-300 transform hover:scale-105">
          <div class="flex items-center justify-between mb-4">
            <div class="w-12 h-12 bg-gradient-to-br from-green-500/90 to-green-600/90 backdrop-blur-sm rounded-xl flex items-center justify-center shadow-lg">
              <i data-lucide="target" class="w-6 h-6 text-white"></i>
            </div>
            <span class="inline-flex px-3 py-1 text-xs font-semibold rounded-full bg-gray-100/80 backdrop-blur-sm text-gray-800 border border-gray-200/50">
              Completed
            </span>
          </div>
          
          <h4 class="text-lg font-semibold text-slate-900 mb-3">Dynamic Programming Contest</h4>
          <p class="text-sm text-slate-600 mb-5 leading-relaxed">Expert-level contest covering advanced dynamic programming techniques.</p>
          
          <!-- Contest Info Grid -->
          <div class="grid grid-cols-2 gap-4 mb-5">
            <!-- Category -->
            <div class="bg-gradient-to-br from-blue-50/80 to-blue-100/60 backdrop-blur-sm rounded-lg p-3 border border-blue-200/30">
              <div class="flex items-center gap-2 mb-1">
                <i data-lucide="tag" class="w-4 h-4 text-blue-600"></i>
                <span class="text-xs font-medium text-blue-700 uppercase tracking-wide">Category</span>
              </div>
              <span class="text-sm font-semibold text-blue-900">Dynamic Programming</span>
      </div>

            <!-- Batch -->
            <div class="bg-gradient-to-br from-yellow-50/80 to-yellow-100/60 backdrop-blur-sm rounded-lg p-3 border border-yellow-200/30">
              <div class="flex items-center gap-2 mb-1">
                <i data-lucide="users" class="w-4 h-4 text-yellow-600"></i>
                <span class="text-xs font-medium text-yellow-700 uppercase tracking-wide">Batch</span>
            </div>
              <span class="text-sm font-semibold text-yellow-900" id="contest3-batch">Batch A</span>
          </div>
            
            <!-- Participants -->
            <div class="bg-gradient-to-br from-green-50/80 to-green-100/60 backdrop-blur-sm rounded-lg p-3 border border-green-200/30">
              <div class="flex items-center gap-2 mb-1">
                <i data-lucide="users" class="w-4 h-4 text-green-600"></i>
                <span class="text-xs font-medium text-green-700 uppercase tracking-wide">Participants</span>
            </div>
              <span class="text-sm font-semibold text-green-900" id="contest3-participants">203</span>
            </div>
            
            <!-- Start Date -->
            <div class="bg-gradient-to-br from-purple-50/80 to-purple-100/60 backdrop-blur-sm rounded-lg p-3 border border-purple-200/30">
              <div class="flex items-center gap-2 mb-1">
                <i data-lucide="calendar" class="w-4 h-4 text-purple-600"></i>
                <span class="text-xs font-medium text-purple-700 uppercase tracking-wide">Start Date</span>
            </div>
              <span class="text-sm font-semibold text-purple-900" id="contest3-start-date">Jan 8, 2025</span>
            </div>
          </div>
          
          <div class="flex gap-2 w-full">
            <button onclick="editContest('contest3')" class="flex-1 px-4 py-2 bg-gradient-to-r from-blue-500/90 to-blue-600/90 backdrop-blur-sm text-white rounded-lg text-sm hover:from-blue-600/90 hover:to-blue-700/90 transition-all shadow-md hover:shadow-lg transform hover:scale-105">
              Edit
            </button>
            <button onclick="viewContest('contest3')" class="flex-1 px-4 py-2 bg-gradient-to-r from-green-500/90 to-green-600/90 backdrop-blur-sm text-white rounded-lg text-sm hover:from-green-600/90 hover:to-green-700/90 transition-all shadow-md hover:shadow-lg transform hover:scale-105">
              View Results
            </button>
            <button onclick="deleteContest('contest3')" class="flex-1 px-4 py-2 bg-gradient-to-r from-red-500/90 to-red-600/90 backdrop-blur-sm text-white rounded-lg text-sm hover:from-red-600/90 hover:to-red-700/90 transition-all shadow-md hover:shadow-lg transform hover:scale-105">
              Delete
            </button>
          </div>
        </div>
      </div>

      <!-- Load More Button -->
      <div class="text-center pt-4">
        <button class="inline-flex items-center px-6 py-3 bg-white/80 backdrop-blur-sm text-slate-700 border border-white/30 rounded-lg hover:bg-white/90 hover:border-white/50 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105">
          <i data-lucide="chevron-down" class="w-4 h-4 mr-2"></i>
          Load More Contests
        </button>
      </div>
    </div>

  <!-- Create Contest Modal -->
    <div id="createContestModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-4">
      <div class="modal-content bg-white rounded-xl shadow-2xl max-w-md w-full max-h-[75vh] overflow-y-auto">
      <div class="p-6 border-b border-slate-200">
        <div class="flex items-center justify-between">
            <h3 class="text-xl font-semibold text-slate-900">Create New Contest</h3>
            <button onclick="closeCreateContestModal()" class="text-slate-400 hover:text-slate-600 transition-colors">
            <i data-lucide="x" class="w-6 h-6"></i>
          </button>
        </div>
      </div>
      
        <form id="createContestForm" class="p-6 space-y-6">
          <!-- Contest Name -->
            <div>
            <label class="block text-sm font-semibold text-slate-700 mb-2">Contest Name *</label>
            <input type="text" name="contestName" class="form-input w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all hover:border-slate-300 hover:shadow-md" placeholder="Enter contest name" required>
            </div>
          
          <!-- Description -->
            <div>
            <label class="block text-sm font-semibold text-slate-700 mb-2">Description *</label>
            <textarea name="description" rows="3" class="form-input w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all hover:border-slate-300 hover:shadow-md resize-none" placeholder="Describe the contest..." required></textarea>
            </div>
          
          <!-- Category -->
            <div>
            <label class="block text-sm font-semibold text-slate-700 mb-2">Category *</label>
            <input type="text" name="category" class="form-input w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all hover:border-slate-300 hover:shadow-md" placeholder="e.g., Algorithms, Data Structures" required>
            </div>
          
          <!-- Batch -->
            <div>
            <label class="block text-sm font-semibold text-slate-700 mb-2">🎯 Assign to Batch *</label>
            <select name="batch" class="form-input w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all hover:border-slate-300 hover:shadow-md" required>
              <option value="">Select a batch</option>
                      <option value="batch1" id="batch1-option">Batch-2024-A (45 students)</option>
        <option value="batch2" id="batch2-option">Batch-2024-B (38 students)</option>
        <option value="batch3" id="batch3-option">Batch-2024-C (42 students)</option>
        <option value="batch4" id="batch4-option">Batch-2024-D (35 students)</option>
            </select>
            </div>
          
          <!-- Mentor Assignment -->
            <div>
            <label class="block text-sm font-semibold text-slate-700 mb-2">👨‍🏫 Assign Mentor *</label>
            <select name="mentor" class="form-input w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all hover:border-slate-300 hover:shadow-md" required>
              <option value="">Select a mentor</option>
              <option value="mentor1">Dr. Sarah Wilson - Algorithms Expert</option>
              <option value="mentor2">Prof. Michael Chen - Data Structures</option>
              <option value="mentor3">Dr. Emily Rodriguez - Dynamic Programming</option>
              <option value="mentor4">Prof. David Kim - Graph Theory</option>
              <option value="mentor5">Dr. Lisa Thompson - Mathematics</option>
              </select>
            </div>
          
          <!-- Start Date -->
            <div>
            <label class="block text-sm font-semibold text-slate-700 mb-2">Start Date *</label>
            <input type="date" name="startDate" class="form-input w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all hover:border-slate-300 hover:shadow-md" required>
            </div>
          
          <!-- End Date -->
          <div>
            <label class="block text-sm font-semibold text-slate-700 mb-2">End Date *</label>
            <input type="date" name="endDate" class="form-input w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all hover:border-slate-300 hover:shadow-md" required>
          </div>
          

          

          
          <!-- Form Actions -->
          <div class="flex gap-3 pt-4">
            <button type="button" onclick="closeCreateContestModal()" class="flex-1 px-6 py-3 bg-slate-100 text-slate-700 rounded-lg hover:bg-slate-200 transition-colors shadow-md hover:shadow-lg">
              Cancel
            </button>
            <button type="submit" class="flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors shadow-md hover:shadow-lg">
              Create Contest
            </button>
          </div>
        </form>
    </div>
  </div>

  </main>

  <script>
    lucide.createIcons();
    
    // Mobile navigation functionality
    const mobileMenuBtn = document.getElementById('mobileMenuBtn');
    const mobileSidebar = document.getElementById('mobileSidebar');
    const closeMobileMenu = document.getElementById('closeMobileMenu');
    const mobileNav = document.getElementById('mobileNav');

    // Populate mobile navigation
    function populateMobileNav() {
      const navItems = [
        { href: 'admin-dashboard.html', icon: 'layout-dashboard', label: 'Dashboard' },
        { href: 'admin-users.html', icon: 'users', label: 'Users' },
        { href: 'admin-mentors.html', icon: 'graduation-cap', label: 'Mentors' },
        { href: 'admin-contests.html', icon: 'trophy', label: 'Contests' },
        { href: 'admin-analytics.html', icon: 'bar-chart-3', label: 'Analytics' },
        { href: 'admin-leaderboard.html', icon: 'award', label: 'Leaderboard' },
        { href: 'admin-profile.html', icon: 'user', label: 'Profile' }
      ];

      mobileNav.innerHTML = navItems.map(item => `
        <a href="${item.href}" class="mobile-touch-target w-full text-left px-4 py-3 rounded-lg text-sm font-medium text-slate-600 hover:text-slate-900 hover:bg-slate-50 border border-transparent hover:border-slate-200 transition-all">
          <i data-lucide="${item.icon}" class="w-4 h-4 inline mr-3"></i> ${item.label}
        </a>
      `).join('');

      // Recreate icons for mobile nav
      lucide.createIcons();
    }

    // Mobile menu functions
    function openMobileMenu() {
      mobileSidebar.classList.add('open');
      document.body.style.overflow = 'hidden';
    }

    function closeMobileMenuFunc() {
      mobileSidebar.classList.remove('open');
      document.body.style.overflow = 'auto';
    }

    // Event listeners
    mobileMenuBtn.addEventListener('click', openMobileMenu);
    closeMobileMenu.addEventListener('click', closeMobileMenuFunc);

    // Close mobile menu when clicking outside
    mobileSidebar.addEventListener('click', (e) => {
      if (e.target === mobileSidebar) {
        closeMobileMenuFunc();
      }
    });

    // Initialize mobile navigation
    populateMobileNav();
    
    // Load contests from Firebase on page load
    loadContests();
    
    // Update stats with real data
    updateContestStats();
    
    // Contest Modal Functions
    function openCreateContestModal() {
      document.getElementById('createContestModal').classList.remove('hidden');
      document.body.style.overflow = 'hidden';
    }
    
    function closeCreateContestModal() {
      document.getElementById('createContestModal').classList.add('hidden');
      document.body.style.overflow = 'auto';
    }

    // Handle contest form submission
    document.addEventListener('DOMContentLoaded', function() {
      const createContestForm = document.getElementById('createContestForm');
      if (createContestForm) {
        createContestForm.addEventListener('submit', async function(e) {
          e.preventDefault();
          
          // Get form data
          const formData = new FormData(e.target);
          const contestData = {
            name: formData.get('contestName'),
            description: formData.get('description'),
            category: formData.get('category'),
            batch: formData.get('batch'),
            mentor: formData.get('mentor'),
            startDate: formData.get('startDate'),
            endDate: formData.get('endDate')
          };

          try {
            // Send data to Firebase
            const response = await window.APIService.createContest(contestData);
            if (response.success) {
              alert('Contest created successfully!');
              closeCreateContestModal();
              e.target.reset();
              // Reload contests from Firebase to show the new contest
              loadContests();
            } else {
              alert('Failed to create contest: ' + response.message);
            }
          } catch (error) {
            console.error('Error creating contest:', error);
            alert('Error creating contest: ' + error.message);
          }
        });
      }

      // Close modal when clicking outside
      const modal = document.getElementById('createContestModal');
      if (modal) {
        modal.addEventListener('click', function(e) {
      if (e.target === this) {
        closeCreateContestModal();
      }
    });
      }
    });
    
    // Add page transition effects
    document.addEventListener('DOMContentLoaded', () => {
      document.body.classList.add('page-loaded');
      
      // Load contests dynamically on page load
      loadContests();
      updateContestStats();
      
      // Add smooth navigation transitions
      document.querySelectorAll('a[href^="admin-"]').forEach(link => {
        link.addEventListener('click', (e) => {
          // Add page exit animation
          document.body.classList.add('page-exiting');
          
          // Small delay for animation
          setTimeout(() => {
            window.location.href = link.href;
          }, 150);
        });
      });
    });

    // Load contests from Firebase
    async function loadContests() {
      try {
        console.log('Loading contests from Firebase...');
        
        // Show loading notification
        const loadingNotification = window.notifications?.showLoading(
          'Loading Contests...',
          'Fetching contest data from server.'
        );

        showLoadingState();
        
        // Use new API service
        const response = await window.APIService.getContests();
        
        window.notifications?.hideLoading(loadingNotification);

        if (response.success) {
          displayContests(response.data.contests || response.data);
          updateStatsDisplay(response.data.contests || response.data);
          
          // Show success notification
          window.notifications?.success(
            'Contests Loaded',
            `Successfully loaded ${(response.data.contests || response.data).length} contests`
          );
        } else {
          console.error('Failed to load contests:', response.error);
          window.notifications?.error(
            'Load Failed',
            response.error || 'Failed to load contests from Firebase'
          );
          // Show static contests as fallback
          showStaticContests();
        }
      } catch (error) {
        console.error('Error loading contests:', error);
        window.notifications?.error(
          'Load Error',
          'Error loading contests from Firebase'
        );
        // Show static contests as fallback
        showStaticContests();
      }
    }
    
    // Display contests dynamically
    function displayContests(contests) {
      const contestsContainer = document.querySelector('.grid.grid-cols-1.md\\:grid-cols-2');
      if (!contestsContainer) return;
      
      if (contests.length === 0) {
        contestsContainer.innerHTML = `
          <div class="col-span-2 text-center py-12">
            <div class="w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4">
              <i data-lucide="trophy" class="w-8 h-8 text-slate-400"></i>
            </div>
            <h3 class="text-lg font-semibold text-slate-700 mb-2">No Contests Yet</h3>
            <p class="text-slate-500 mb-6">Create your first contest to get started!</p>
            <button onclick="openCreateContestModal()" class="btn-primary px-6 py-3 rounded-xl">
              Create First Contest
            </button>
          </div>
        `;
        lucide.createIcons();
        return;
      }
      
      contestsContainer.innerHTML = contests.map(contest => createContestCard(contest)).join('');
      lucide.createIcons();
    }
    
    // Create contest card HTML
    function createContestCard(contest) {
      const status = getContestStatus(contest);
      const statusClass = getStatusClass(status);
      const icon = getContestIcon(contest.category);
      
      return `
        <div class="contest-card bg-white/70 backdrop-blur-md rounded-xl shadow-lg p-6 border border-white/20 hover:shadow-xl hover:bg-white/80 transition-all duration-300 transform hover:scale-105">
          <div class="flex items-center justify-between mb-4">
            <div class="w-12 h-12 bg-gradient-to-br from-blue-500/90 to-blue-600/90 backdrop-blur-sm rounded-xl flex items-center justify-center shadow-lg">
              <i data-lucide="${icon}" class="w-6 h-6 text-white"></i>
            </div>
            <span class="inline-flex px-3 py-1 text-xs font-semibold rounded-full ${statusClass}">
              ${status}
            </span>
          </div>
          
          <h4 class="text-lg font-semibold text-slate-900 mb-3">${contest.name}</h4>
          <p class="text-sm text-slate-600 mb-5 leading-relaxed">${contest.description}</p>
          
          <!-- Contest Info Grid -->
          <div class="grid grid-cols-2 gap-4 mb-5">
            <!-- Category -->
            <div class="bg-gradient-to-br from-blue-50/80 to-blue-100/60 backdrop-blur-sm rounded-lg p-3 border border-blue-200/30">
              <div class="flex items-center gap-2 mb-1">
                <i data-lucide="tag" class="w-4 h-4 text-blue-600"></i>
                <span class="text-xs font-medium text-blue-700 uppercase tracking-wide">Category</span>
              </div>
              <span class="text-sm font-semibold text-blue-900">${contest.category}</span>
            </div>
            
            <!-- Batch -->
            <div class="bg-gradient-to-br from-yellow-50/80 to-yellow-100/60 backdrop-blur-sm rounded-lg p-3 border border-yellow-200/30">
              <div class="flex items-center gap-2 mb-1">
                <i data-lucide="users" class="w-4 h-4 text-yellow-600"></i>
                <span class="text-xs font-medium text-yellow-700 uppercase tracking-wide">Batch</span>
              </div>
              <span class="text-sm font-semibold text-yellow-900">${contest.batch || 'Not Assigned'}</span>
            </div>
            
            <!-- Participants -->
            <div class="bg-gradient-to-br from-green-50/80 to-green-100/60 backdrop-blur-sm rounded-lg p-3 border border-green-200/30">
              <div class="flex items-center gap-2 mb-1">
                <i data-lucide="users" class="w-4 h-4 text-green-600"></i>
                <span class="text-xs font-medium text-green-700 uppercase tracking-wide">Participants</span>
              </div>
              <span class="text-sm font-semibold text-green-900">${contest.participants?.length || 0}</span>
            </div>
            
            <!-- Start Date -->
            <div class="bg-gradient-to-br from-purple-50/80 to-purple-100/60 backdrop-blur-sm rounded-lg p-3 border border-purple-200/30">
              <div class="flex items-center gap-2 mb-1">
                <i data-lucide="calendar" class="w-4 h-4 text-purple-600"></i>
                <span class="text-xs font-medium text-purple-700 uppercase tracking-wide">Start Date</span>
              </div>
              <span class="text-sm font-semibold text-purple-900">${formatDate(contest.startDate)}</span>
            </div>
          </div>
          
          <div class="flex gap-2 w-full">
            <button onclick="editContest('${contest._id}')" class="flex-1 px-4 py-2 bg-gradient-to-r from-blue-500/90 to-blue-600/90 backdrop-blur-sm text-white rounded-lg text-sm hover:from-blue-600/90 hover:to-blue-700/90 transition-all shadow-md hover:shadow-lg transform hover:scale-105">
              Edit
            </button>
            <button onclick="viewContest('${contest._id}')" class="flex-1 px-4 py-2 bg-gradient-to-r from-green-500/90 to-green-600/90 backdrop-blur-sm text-white rounded-lg text-sm hover:from-green-600/90 hover:to-green-700/90 transition-all shadow-md hover:shadow-lg transform hover:scale-105">
              ${status === 'Completed' ? 'View Results' : 'View'}
            </button>
            <button onclick="deleteContest('${contest._id}')" class="flex-1 px-4 py-2 bg-gradient-to-r from-red-500/90 to-red-600/90 backdrop-blur-sm text-white rounded-lg text-sm hover:from-red-600/90 hover:to-red-700/90 transition-all shadow-md hover:shadow-lg transform hover:scale-105">
              Delete
            </button>
          </div>
        </div>
      `;
    }
    
    // Helper functions
    function getContestStatus(contest) {
      const now = new Date();
      const startDate = new Date(contest.startDate);
      const endDate = new Date(contest.endDate);
      
      if (now < startDate) return 'Upcoming';
      if (now >= startDate && now <= endDate) return 'Active';
      return 'Completed';
    }
    
    function getStatusClass(status) {
      const classes = {
        'Active': 'bg-green-100/80 backdrop-blur-sm text-green-800 border border-green-200/50',
        'Upcoming': 'bg-blue-100/80 backdrop-blur-sm text-blue-800 border border-blue-200/50',
        'Completed': 'bg-gray-100/80 backdrop-blur-sm text-gray-800 border border-gray-200/50'
      };
      return classes[status] || classes['Upcoming'];
    }
    
    function getContestIcon(category) {
      const icons = {
        'Algorithms': 'code',
        'Data Structures': 'database',
        'Dynamic Programming': 'target',
        'Graph Theory': 'network',
        'Mathematics': 'calculator'
      };
      return icons[category] || 'trophy';
    }
    
    function formatDate(dateString) {
      return new Date(dateString).toLocaleDateString('en-US', {
        year: 'numeric',
        month: 'short',
        day: 'numeric'
      });
    }
    
    // Show static contests as fallback
    function showStaticContests() {
      console.log('Showing static contests as fallback');
      // Keep the existing static contest cards
    }
    
    // Show loading state
    function showLoadingState() {
      const contestsContainer = document.querySelector('.grid.grid-cols-1.md\\:grid-cols-2');
      if (!contestsContainer) return;
      
      contestsContainer.innerHTML = `
        <div class="col-span-2 text-center py-12">
          <div class="w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4 animate-spin">
            <i data-lucide="loader-2" class="w-8 h-8 text-slate-400"></i>
          </div>
          <h3 class="text-lg font-semibold text-slate-700 mb-2">Loading Contests...</h3>
          <p class="text-slate-500">Please wait while we fetch your contests</p>
        </div>
      `;
      lucide.createIcons();
    }
    
    // Update contest statistics
    async function updateContestStats() {
      try {
        const response = await window.APIService.getContests();
        if (response.success) {
          const contests = response.data;
          updateStatsDisplay(contests);
        }
      } catch (error) {
        console.error('Error updating contest stats:', error);
      }
    }
    
    // Update stats display with contest data
    function updateStatsDisplay(contests) {
      const stats = {
        total: contests.length,
        active: contests.filter(c => getContestStatus(c) === 'Active').length,
        upcoming: contests.filter(c => getContestStatus(c) === 'Upcoming').length,
        completed: contests.filter(c => getContestStatus(c) === 'Completed').length
      };
      
      // Update stats display
      const totalElement = document.getElementById('totalContests');
      const activeElement = document.getElementById('activeContests');
      const upcomingElement = document.getElementById('upcomingContests');
      const completedElement = document.getElementById('completedContests');
      
      if (totalElement) totalElement.textContent = stats.total;
      if (activeElement) activeElement.textContent = stats.active;
      if (upcomingElement) upcomingElement.textContent = stats.upcoming;
      if (completedElement) completedElement.textContent = stats.completed;
    }
    
    // Contest Management Functions
    async function editContest(contestId) {
      console.log('Editing contest:', contestId);
      try {
        // Fetch contest data from Firebase
        const response = await window.APIService.getContestById(contestId);
        if (response.success) {
          // Show edit modal with contest data
          showEditContestModal(response.data);
        } else {
          window.notifications?.error('Load Failed', response.error || 'Failed to load contest data for editing');
        }
      } catch (error) {
        console.error('Error loading contest:', error);
        window.notifications?.error('Load Error', 'Error loading contest data');
      }
    }
    
    async function viewContest(contestId) {
      console.log('Viewing contest:', contestId);
      try {
        // Fetch contest details from Firebase
        const response = await window.APIService.getContestById(contestId);
        if (response.success) {
          // Show contest details modal
          showContestDetailsModal(response.data);
        } else {
          window.notifications?.error('Load Failed', response.error || 'Failed to load contest details');
        }
      } catch (error) {
        console.error('Error loading contest details:', error);
        window.notifications?.error('Load Error', 'Error loading contest details');
      }
    }
    
    async function deleteContest(contestId) {
      console.log('Deleting contest:', contestId);
      // Show confirmation dialog
      if (confirm(`Are you sure you want to delete contest ${contestId}? This action cannot be undone.`)) {
        try {
                  // Call API to delete contest
        const response = await window.APIService.deleteContest(contestId);
        if (response.success) {
          window.notifications?.success('Contest Deleted', `Contest deleted successfully!`);
          // Reload contests from Firebase to update the display
          loadContests();
        } else {
          window.notifications?.error('Delete Failed', response.error || 'Failed to delete contest');
        }
        } catch (error) {
          console.error('Error deleting contest:', error);
          alert('Error deleting contest');
        }
      }
    }
    
    function showEditContestModal(contestData) {
      // This would show a modal with pre-filled contest data for editing
      alert(`Edit modal for contest: ${contestData.name}\nThis would open a form with pre-filled data for editing`);
    }
    
    function showContestDetailsModal(contestData) {
      // This would show a modal with contest details, participants, and results
      alert(`Contest Details: ${contestData.name}\nParticipants: ${contestData.participants?.length || 0}\nStatus: ${contestData.status}`);
    }
    
    // Initialize DataManager for dynamic data
    document.addEventListener('DOMContentLoaded', function() {
        // Check authentication first
        if (window.authManager && !window.authManager.isAuthenticated) {
            window.location.href = '/pages/auth/login.html';
            return;
        }

        // Load contests from Firebase
        loadContests();
        
        // Initialize DataManager if available
        if (window.DataManager) {
            window.DataManager.updateAdminContestData();
        }
    });
    
    // Add page transition CSS
    const style = document.createElement('style');
    style.textContent = `
      .page-loaded {
        animation: pageEnter 0.6s ease-out;
      }
      
      .page-exiting {
        animation: pageExit 0.15s ease-in;
      }
      
      @keyframes pageEnter {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
      }
      
      @keyframes pageExit {
        from { opacity: 1; transform: translateY(0); }
        to { opacity: 0; transform: translateY(-20px); }
      }
    `;
    document.head.appendChild(style);
  </script>
</body>
</html> 