<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile - SkillPort Personal</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.min.js"></script>
    <script type="module" src="/js/apiService.js"></script>
    <script type="module" src="/js/notifications.js"></script>
    <script type="module" src="/js/authManager.js"></script>
    <script type="module" src="/js/contextManager.js"></script>
    <script type="module" src="/js/dataLoader.js"></script>
    <script type="module" src="/js/uiHelpers.js"></script>
    <script type="module" src="/js/pageController.js"></script>
    <script type="module" src="/js/personalProfileController.js"></script>
    <script type="module" src="/js/firebaseService.js"></script>
    <style>
        body { 
            font-family: 'Inter', sans-serif; 
        }
        
        /* Enhanced glassy effects */
        .glassy-card {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 8px 32px rgba(31, 38, 135, 0.1);
            transition: all 0.3s ease;
        }
        
        .glassy-card:hover {
            background: rgba(255, 255, 255, 0.9);
            border-color: rgba(59, 130, 246, 0.4);
            box-shadow: 0 12px 40px rgba(31, 38, 135, 0.15);
            transform: translateY(-4px);
        }
        
        .glassy-button {
            background: rgba(59, 130, 246, 0.15);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(59, 130, 246, 0.3);
            color: rgb(37, 99, 235);
            transition: all 0.2s ease;
        }
        
        .glassy-button:hover {
            background: rgba(59, 130, 246, 0.25);
            border-color: rgba(59, 130, 246, 0.5);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.2);
        }
        
        /* Sidebar navigation styling */
        .nav-item {
            transition: all 0.3s ease;
            border-radius: 12px;
        }
        
        .nav-item:hover {
            background: rgba(59, 130, 246, 0.1);
            transform: translateX(4px);
        }
        
        .nav-item.active {
            background: rgba(59, 130, 246, 0.15);
            border-left: 4px solid #3b82f6;
            color: #1d4ed8;
        }
        
        /* Content section animations */
        .content-section {
            animation: fadeIn 0.3s ease-in-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Form input styling */
        .form-input {
            transition: all 0.2s ease;
            border: 2px solid transparent;
        }
        
        .form-input:focus {
            border-color: rgba(59, 130, 246, 0.5);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
            transform: translateY(-1px);
        }
        
        /* Button hover effects */
        .btn-primary {
            transition: all 0.3s ease;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }
        
        /* Profile image hover effect */
        .profile-image-container:hover .profile-image-overlay {
            opacity: 1;
        }
        
        .profile-image-overlay {
            transition: opacity 0.3s ease;
            opacity: 0;
        }
        
        /* Smooth page transitions */
        .page-content {
            animation: fadeInUp 0.4s ease-out;
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* Enhanced hover effects */
        .nav-link {
            transition: all 0.2s ease;
        }
        
        .nav-link:hover {
            background: rgba(59, 130, 246, 0.1);
            transform: translateY(-1px);
        }
    </style>
</head>
<body class="bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 min-h-screen">
    <!-- Dashboard Header -->
    <header class="sticky top-0 z-50 bg-white/80 backdrop-blur-xl border-b border-slate-200/50 shadow-sm">
        <nav class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center gap-3 group">
                    <div class="w-10 h-10 bg-gradient-to-br from-blue-600 to-indigo-600 rounded-xl flex items-center justify-center group-hover:scale-105 transition-transform shadow-lg">
                        <i data-lucide="target" class="w-6 h-6 text-white"></i>
                    </div>
                    <span class="text-xl font-bold bg-gradient-to-r from-slate-900 via-blue-800 to-indigo-700 bg-clip-text text-transparent">
                        SkillPort Personal
                    </span>
                </div>
                
                <div class="hidden md:flex items-center gap-1">
                    <a href="student-dashboard.html" class="nav-link flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium text-slate-600 hover:text-slate-900">
                        <i data-lucide="layout-dashboard" class="w-4 h-4"></i> Dashboard
                    </a>
                    <a href="projects.html" class="nav-link flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium text-slate-600 hover:text-slate-900">
                        <i data-lucide="folder" class="w-4 h-4"></i> Projects
                    </a>
                    <a href="tracker.html" class="nav-link flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium text-slate-600 hover:text-slate-900">
                        <i data-lucide="activity" class="w-4 h-4"></i> Tracker
                    </a>
                    <a href="stats.html" class="nav-link flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium text-slate-600 hover:text-slate-900">
                        <i data-lucide="bar-chart-3" class="w-4 h-4"></i> Stats
                    </a>
                    <a href="communities.html" class="nav-link flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium text-slate-600 hover:text-slate-900">
                        <i data-lucide="users" class="w-4 h-4"></i> Communities
                    </a>
                    <a href="profile.html" class="nav-link flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium bg-blue-50 text-blue-700 shadow-sm">
                        <img src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=32&h=32&fit=crop&crop=face" alt="Profile" class="w-8 h-8 rounded-full object-cover shadow-lg border-2 border-white">
                    </a>
                </div>
            </div>
        </nav>
    </header>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- Header -->
        <div class="mb-8">
            <h1 class="text-3xl font-bold text-slate-900 mb-2">My Profile</h1>
            <p class="text-slate-600">Manage your profile, settings, and learning preferences</p>
        </div>

        <!-- Layout -->
        <div class="grid grid-cols-1 lg:grid-cols-4 gap-8">
            <!-- Sidebar Navigation -->
            <div class="lg:col-span-1">
                <div class="glassy-card rounded-2xl p-6 shadow-xl">
                    <h3 class="text-lg font-semibold text-slate-900 mb-6 flex items-center gap-2">
                        <i data-lucide="settings" class="w-5 h-5 text-blue-600"></i>
                        Settings
                    </h3>
                    
                    <nav class="space-y-2">
                        <button onclick="showSection('profile')" class="nav-item active w-full text-left px-4 py-3 flex items-center gap-3 text-sm font-medium text-slate-700">
                            <i data-lucide="user" class="w-4 h-4"></i>
                            Profile
                        </button>
                        
                        <button onclick="showSection('learning')" class="nav-item w-full text-left px-4 py-3 flex items-center gap-3 text-sm font-medium text-slate-600">
                            <i data-lucide="book-open" class="w-4 h-4"></i>
                            Learning Goals
                        </button>
                        
                        <button onclick="showSection('platforms')" class="nav-item w-full text-left px-4 py-3 flex items-center gap-3 text-sm font-medium text-slate-600">
                            <i data-lucide="code" class="w-4 h-4"></i>
                            Coding Platforms
                        </button>
                        
                        <button onclick="showSection('password')" class="nav-item w-full text-left px-4 py-3 flex items-center gap-3 text-sm font-medium text-slate-600">
                            <i data-lucide="lock" class="w-4 h-4"></i>
                            Password
                        </button>
                        
                        <button onclick="showSection('preferences')" class="nav-item w-full text-left px-4 py-3 flex items-center gap-3 text-sm font-medium text-slate-600">
                            <i data-lucide="sliders" class="w-4 h-4"></i>
                            Preferences
                        </button>
                        
                        <div class="pt-4 border-t border-slate-200">
                            <button onclick="showSection('export')" class="nav-item w-full text-left px-4 py-3 flex items-center gap-3 text-sm font-medium text-emerald-600">
                                <i data-lucide="download" class="w-4 h-4"></i>
                                Export Data
                            </button>
                            
                            <button onclick="showSection('logout')" class="nav-item w-full text-left px-4 py-3 flex items-center gap-3 text-sm font-medium text-red-600">
                                <i data-lucide="log-out" class="w-4 h-4"></i>
                                Logout
                            </button>
                        </div>
                    </nav>
                </div>
            </div>

            <!-- Content Area -->
            <div class="lg:col-span-3">
                <!-- Profile Section -->
                <div id="profile-section" class="content-section">
                    <div class="glassy-card rounded-2xl p-8 shadow-xl">
                        <h2 class="text-2xl font-semibold text-slate-900 mb-6 flex items-center gap-3">
                            <i data-lucide="user" class="w-6 h-6 text-blue-600"></i>
                            Profile Information
                        </h2>
                        
                        <!-- Profile Image -->
                        <div class="text-center mb-8">
                            <div class="profile-image-container relative inline-block mb-4">
                                <img id="profileImage" src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=150&h=150&fit=crop&crop=face" 
                                     alt="Student Profile" class="w-32 h-32 rounded-full object-cover shadow-xl border-4 border-white">
                                <div class="profile-image-overlay absolute inset-0 bg-black/50 rounded-full flex items-center justify-center">
                                    <label for="imageUpload" class="cursor-pointer text-white">
                                        <i data-lucide="camera" class="w-8 h-8"></i>
                                    </label>
                                </div>
                            </div>
                            <input type="file" id="imageUpload" accept="image/*" class="hidden" onchange="updateProfileImage(this)">
                            <p class="text-sm text-slate-500">Click on the image to change profile picture</p>
                        </div>
                        
                        <!-- Profile Form -->
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-medium text-slate-700 mb-2">First Name</label>
                                <input type="text" id="firstName" value="John" 
                                       class="form-input w-full px-4 py-3 border border-slate-300 rounded-lg focus:outline-none transition-all">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-slate-700 mb-2">Last Name</label>
                                <input type="text" id="lastName" value="Smith" 
                                       class="form-input w-full px-4 py-3 border border-slate-300 rounded-lg focus:outline-none transition-all">
                            </div>
                        </div>
                        
                        <div class="mt-6">
                            <label class="block text-sm font-medium text-slate-700 mb-2">Username</label>
                            <input type="text" id="username" value="johnsmith" 
                                   class="form-input w-full px-4 py-3 border border-slate-300 rounded-lg focus:outline-none transition-all">
                        </div>
                        
                        <div class="mt-6">
                            <label class="block text-sm font-medium text-slate-700 mb-2">Bio</label>
                            <textarea id="bio" rows="4" 
                                      class="form-input w-full px-4 py-3 border border-slate-300 rounded-lg focus:outline-none transition-all resize-none">Passionate software developer with expertise in algorithms and web development. Always learning and growing!</textarea>
                        </div>
                        
                        <div class="mt-6">
                            <button onclick="saveProfileInfo()" class="btn-primary bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white px-8 py-3 rounded-lg font-semibold">
                                <i data-lucide="save" class="w-5 h-5 inline mr-2"></i>
                                Save Profile
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Learning Goals Section -->
                <div id="learning-section" class="content-section hidden">
                    <div class="glassy-card rounded-2xl p-8 shadow-xl">
                        <h2 class="text-2xl font-semibold text-slate-900 mb-6 flex items-center gap-3">
                            <i data-lucide="book-open" class="w-6 h-6 text-emerald-600"></i>
                            Learning Goals & Progress
                        </h2>
                        
                        <!-- Current Goals -->
                        <div class="mb-8">
                            <h3 class="text-lg font-semibold text-slate-800 mb-4">Current Learning Goals</h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div class="bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-4 border border-blue-200">
                                    <div class="flex items-center justify-between mb-2">
                                        <h4 class="font-semibold text-slate-800">Master Data Structures</h4>
                                        <span class="bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full" id="data-structures-progress">75%</span>
                                    </div>
                                    <div class="w-full bg-blue-200 rounded-full h-2 mb-2">
                                        <div class="bg-gradient-to-r from-blue-500 to-indigo-600 h-2 rounded-full" style="width: 75%" id="data-structures-bar"></div>
                                    </div>
                                    <p class="text-sm text-slate-600">Target: Complete 50 problems by end of month</p>
                                </div>
                                
                                <div class="bg-gradient-to-r from-emerald-50 to-teal-50 rounded-xl p-4 border border-emerald-200">
                                    <div class="flex items-center justify-between mb-2">
                                        <h4 class="font-semibold text-slate-800">Web Development</h4>
                                        <span class="bg-emerald-100 text-emerald-800 text-xs px-2 py-1 rounded-full" id="web-dev-progress">60%</span>
                                    </div>
                                    <div class="w-full bg-emerald-200 rounded-full h-2 mb-2">
                                        <div class="bg-gradient-to-r from-emerald-500 to-teal-600 h-2 rounded-full" style="width: 60%" id="web-dev-bar"></div>
                                    </div>
                                    <p class="text-sm text-slate-600">Target: Build 3 full-stack projects</p>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Add New Goal -->
                        <div class="bg-slate-50 rounded-xl p-6 border border-slate-200">
                            <h3 class="text-lg font-semibold text-slate-800 mb-4">Add New Learning Goal</h3>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-slate-700 mb-2">Goal Title</label>
                                    <input type="text" id="newGoalTitle" placeholder="e.g., Master React" 
                                           class="form-input w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none transition-all">
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-slate-700 mb-2">Category</label>
                                    <select id="newGoalCategory" class="form-input w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none transition-all">
                                        <option value="">Choose category...</option>
                                        <option value="algorithms">Algorithms</option>
                                        <option value="web-development">Web Development</option>
                                        <option value="mobile-development">Mobile Development</option>
                                        <option value="data-science">Data Science</option>
                                        <option value="system-design">System Design</option>
                                    </select>
                                </div>
                                
                                <div class="flex items-end">
                                    <button onclick="addNewGoal()" class="btn-primary bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-700 hover:to-emerald-800 text-white px-6 py-2 rounded-lg font-semibold w-full">
                                        <i data-lucide="plus" class="w-4 h-4 inline mr-2"></i>
                                        Add Goal
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Coding Platforms Section -->
                <div id="platforms-section" class="content-section hidden">
                    <div class="glassy-card rounded-2xl p-8 shadow-xl">
                        <h2 class="text-2xl font-semibold text-slate-900 mb-6 flex items-center gap-3">
                            <i data-lucide="code" class="w-6 h-6 text-orange-600"></i>
                            Coding Platforms
                        </h2>
                        
                        <p class="text-slate-600 mb-8">Connect your coding platform accounts to sync your progress and achievements.</p>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <!-- LeetCode -->
                            <div class="bg-gradient-to-r from-orange-50 to-yellow-50 rounded-xl p-6 border border-orange-200">
                                <div class="flex items-center gap-3 mb-4">
                                    <div class="w-10 h-10 bg-orange-500 rounded-lg flex items-center justify-center">
                                        <i data-lucide="code" class="w-5 h-5 text-white"></i>
                                    </div>
                                    <div>
                                        <h3 class="font-semibold text-slate-800">LeetCode</h3>
                                        <p class="text-sm text-slate-600">Algorithm challenges</p>
                                    </div>
                                </div>
                                <input type="text" id="leetcodeUsername" placeholder="Enter LeetCode username" 
                                       class="form-input w-full px-3 py-2 border border-orange-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 transition-all">
                            </div>
                            
                            <!-- GeeksforGeeks -->
                            <div class="bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl p-6 border border-green-200">
                                <div class="flex items-center gap-3 mb-4">
                                    <div class="w-10 h-10 bg-green-500 rounded-lg flex items-center justify-center">
                                        <i data-lucide="code" class="w-5 h-5 text-white"></i>
                                    </div>
                                    <div>
                                        <h3 class="font-semibold text-slate-800">GeeksforGeeks</h3>
                                        <p class="text-sm text-slate-600">DSA practice</p>
                                    </div>
                                </div>
                                <input type="text" id="gfgUsername" placeholder="Enter GeeksforGeeks username" 
                                       class="form-input w-full px-3 py-2 border border-green-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 transition-all">
                            </div>
                            
                            <!-- HackerRank -->
                            <div class="bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6 border border-blue-200">
                                <div class="flex items-center gap-3 mb-4">
                                    <div class="w-10 h-10 bg-blue-500 rounded-lg flex items-center justify-center">
                                        <i data-lucide="code" class="w-5 h-5 text-white"></i>
                                    </div>
                                    <div>
                                        <h3 class="font-semibold text-slate-800">HackerRank</h3>
                                        <p class="text-sm text-slate-600">Programming challenges</p>
                                    </div>
                                </div>
                                <input type="text" id="hackerrankUsername" placeholder="Enter HackerRank username" 
                                       class="form-input w-full px-3 py-2 border border-blue-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all">
                            </div>
                            
                            <!-- InterviewBit -->
                            <div class="bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl p-6 border border-purple-200">
                                <div class="flex items-center gap-3 mb-4">
                                    <div class="w-10 h-10 bg-purple-500 rounded-lg flex items-center justify-center">
                                        <i data-lucide="code" class="w-5 h-5 text-white"></i>
                                    </div>
                                    <div>
                                        <h3 class="font-semibold text-slate-800">InterviewBit</h3>
                                        <p class="text-sm text-slate-600">Interview preparation</p>
                                    </div>
                                </div>
                                <input type="text" id="interviewbitUsername" placeholder="Enter InterviewBit username" 
                                       class="form-input w-full px-3 py-2 border border-purple-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 transition-all">
                            </div>
                        </div>
                        
                        <!-- GitHub -->
                        <div class="mt-6">
                            <div class="bg-gradient-to-r from-gray-50 to-slate-50 rounded-xl p-6 border border-gray-200">
                                <div class="flex items-center gap-3 mb-4">
                                    <div class="w-10 h-10 bg-gray-800 rounded-lg flex items-center justify-center">
                                        <i data-lucide="github" class="w-5 h-5 text-white"></i>
                                    </div>
                                    <div>
                                        <h3 class="font-semibold text-slate-800">GitHub</h3>
                                        <p class="text-sm text-slate-600">Code repository & projects</p>
                                    </div>
                                </div>
                                <input type="text" id="githubUsername" placeholder="Enter GitHub username" 
                                       class="form-input w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 transition-all">
                            </div>
                        </div>
                        
                        <div class="mt-8">
                            <button onclick="savePlatforms()" class="btn-primary bg-gradient-to-r from-orange-600 to-orange-700 hover:from-orange-700 hover:to-orange-800 text-white px-8 py-3 rounded-lg font-semibold">
                                <i data-lucide="save" class="w-5 h-5 inline mr-2"></i>
                                Save Platforms
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Password Section -->
                <div id="password-section" class="content-section hidden">
                    <div class="glassy-card rounded-2xl p-8 shadow-xl">
                        <h2 class="text-2xl font-semibold text-slate-900 mb-6 flex items-center gap-3">
                            <i data-lucide="lock" class="w-6 h-6 text-purple-600"></i>
                            Change Password
                        </h2>
                        
                        <div class="space-y-4 max-w-md">
                            <div>
                                <label class="block text-sm font-medium text-slate-700 mb-2">Current Password</label>
                                <input type="password" id="currentPassword" placeholder="Enter current password" 
                                       class="form-input w-full px-4 py-3 border border-slate-300 rounded-lg focus:outline-none transition-all">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-slate-700 mb-2">New Password</label>
                                <input type="password" id="newPassword" placeholder="Enter new password" 
                                       class="form-input w-full px-4 py-3 border border-slate-300 rounded-lg focus:outline-none transition-all">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-slate-700 mb-2">Confirm New Password</label>
                                <input type="password" id="confirmPassword" placeholder="Confirm new password" 
                                       class="form-input w-full px-4 py-3 border border-slate-300 rounded-lg focus:outline-none transition-all">
                            </div>
                        </div>
                        
                        <div class="mt-6">
                            <button onclick="changePassword()" class="btn-primary bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 text-white px-8 py-3 rounded-lg font-semibold">
                                <i data-lucide="key" class="w-5 h-5 inline mr-2"></i>
                                Change Password
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Preferences Section -->
                <div id="preferences-section" class="content-section hidden">
                    <div class="glassy-card rounded-2xl p-8 shadow-xl">
                        <h2 class="text-2xl font-semibold text-slate-900 mb-6 flex items-center gap-3">
                            <i data-lucide="sliders" class="w-6 h-6 text-green-600"></i>
                            Learning Preferences
                        </h2>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                            <div>
                                <h3 class="text-lg font-semibold text-slate-800 mb-4">Difficulty Level</h3>
                                <div class="space-y-3">
                                    <label class="flex items-center gap-3 cursor-pointer">
                                        <input type="radio" name="difficulty" value="beginner" class="w-4 h-4 text-blue-600" checked>
                                        <span class="text-slate-700">Beginner</span>
                                    </label>
                                    <label class="flex items-center gap-3 cursor-pointer">
                                        <input type="radio" name="difficulty" value="intermediate" class="w-4 h-4 text-blue-600">
                                        <span class="text-slate-700">Intermediate</span>
                                    </label>
                                    <label class="flex items-center gap-3 cursor-pointer">
                                        <input type="radio" name="difficulty" value="advanced" class="w-4 h-4 text-blue-600">
                                        <span class="text-slate-700">Advanced</span>
                                    </label>
                                </div>
                            </div>
                            
                            <div>
                                <h3 class="text-lg font-semibold text-slate-800 mb-4">Learning Style</h3>
                                <div class="space-y-3">
                                    <label class="flex items-center gap-3 cursor-pointer">
                                        <input type="checkbox" name="learningStyle" value="visual" class="w-4 h-4 text-blue-600" checked>
                                        <span class="text-slate-700">Visual Learning</span>
                                    </label>
                                    <label class="flex items-center gap-3 cursor-pointer">
                                        <input type="checkbox" name="learningStyle" value="practical" class="w-4 h-4 text-blue-600" checked>
                                        <span class="text-slate-700">Practical Exercises</span>
                                    </label>
                                    <label class="flex items-center gap-3 cursor-pointer">
                                        <input type="checkbox" name="learningStyle" value="theory" class="w-4 h-4 text-blue-600">
                                        <span class="text-slate-700">Theory & Concepts</span>
                                    </label>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mt-8">
                            <h3 class="text-lg font-semibold text-slate-800 mb-4">Daily Goal</h3>
                            <div class="max-w-md">
                                <label class="block text-sm font-medium text-slate-700 mb-2">Problems to solve per day</label>
                                <input type="number" id="dailyGoal" value="5" min="1" max="20" 
                                       class="form-input w-full px-4 py-3 border border-slate-300 rounded-lg focus:outline-none transition-all">
                                <p class="text-sm text-slate-500 mt-2">Set a realistic daily goal to maintain consistency</p>
                            </div>
                        </div>
                        
                        <div class="mt-6">
                            <button onclick="savePreferences()" class="btn-primary bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white px-8 py-3 rounded-lg font-semibold">
                                <i data-lucide="save" class="w-5 h-5 inline mr-2"></i>
                                Save Preferences
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Export Data Section -->
                <div id="export-section" class="content-section hidden">
                    <div class="glassy-card rounded-2xl p-8 shadow-xl">
                        <h2 class="text-2xl font-semibold text-slate-900 mb-6 flex items-center gap-3">
                            <i data-lucide="download" class="w-6 h-6 text-emerald-600"></i>
                            Export Your Data
                        </h2>
                        
                        <div class="bg-emerald-50 border border-emerald-200 rounded-lg p-6 mb-6">
                            <div class="flex items-start gap-4">
                                <div class="w-12 h-12 bg-emerald-100 rounded-full flex items-center justify-center flex-shrink-0">
                                    <i data-lucide="info" class="w-6 h-6 text-emerald-600"></i>
                                </div>
                                <div>
                                    <h4 class="text-lg font-semibold text-emerald-900 mb-2">Export Your Learning Data</h4>
                                    <p class="text-emerald-700">Download your progress, achievements, and learning history in various formats for backup or analysis.</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                            <div class="bg-white border border-slate-200 rounded-lg p-4 text-center hover:shadow-md transition-all cursor-pointer" onclick="exportData('progress')">
                                <div class="w-16 h-16 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl flex items-center justify-center mx-auto mb-3">
                                    <i data-lucide="bar-chart-3" class="w-8 h-8 text-white"></i>
                                </div>
                                <h4 class="font-semibold text-slate-800 mb-2">Progress Report</h4>
                                <p class="text-sm text-slate-600">Your learning progress and statistics</p>
                            </div>
                            
                            <div class="bg-white border border-slate-200 rounded-lg p-4 text-center hover:shadow-md transition-all cursor-pointer" onclick="exportData('achievements')">
                                <div class="w-16 h-16 bg-gradient-to-br from-emerald-500 to-teal-600 rounded-2xl flex items-center justify-center mx-auto mb-3">
                                    <i data-lucide="award" class="w-8 h-8 text-white"></i>
                                </div>
                                <h4 class="font-semibold text-slate-800 mb-2">Achievements</h4>
                                <p class="text-sm text-slate-600">All your badges and milestones</p>
                            </div>
                            
                            <div class="bg-white border border-slate-200 rounded-lg p-4 text-center hover:shadow-md transition-all cursor-pointer" onclick="exportData('history')">
                                <div class="w-16 h-16 bg-gradient-to-br from-purple-500 to-pink-600 rounded-2xl flex items-center justify-center mx-auto mb-3">
                                    <i data-lucide="history" class="w-8 h-8 text-white"></i>
                                </div>
                                <h4 class="font-semibold text-slate-800 mb-2">Learning History</h4>
                                <p class="text-sm text-slate-600">Complete activity timeline</p>
                            </div>
                        </div>
                        
                        <div class="text-center">
                            <button onclick="exportAllData()" class="btn-primary bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-700 hover:to-emerald-800 text-white px-8 py-4 rounded-lg font-semibold">
                                <i data-lucide="download" class="w-6 h-6 inline mr-2"></i>
                                Export All Data (ZIP)
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Logout Section -->
                <div id="logout-section" class="content-section hidden">
                    <div class="glassy-card rounded-2xl p-8 shadow-xl">
                        <h2 class="text-2xl font-semibold text-slate-900 mb-6 flex items-center gap-3">
                            <i data-lucide="log-out" class="w-6 h-6 text-red-600"></i>
                            Logout
                        </h2>
                        
                        <div class="bg-red-50 border border-red-200 rounded-lg p-6 mb-6">
                            <div class="flex items-start gap-4">
                                <div class="w-12 h-12 bg-red-100 rounded-full flex items-center justify-center flex-shrink-0">
                                    <i data-lucide="alert-triangle" class="w-6 h-6 text-red-600"></i>
                                </div>
                                <div>
                                    <h4 class="text-lg font-semibold text-red-900 mb-2">Logout from SkillPort Personal</h4>
                                    <p class="text-red-700">You will be logged out and redirected to the home page. All unsaved changes will be lost.</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="text-center">
                            <button onclick="logout()" class="btn-primary bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white px-8 py-4 rounded-lg font-semibold">
                                <i data-lucide="log-out" class="w-6 h-6 inline mr-2"></i>
                                Logout from SkillPort Personal
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Toast Notification System -->
    <div id="toast-container" class="fixed top-4 right-4 z-50 space-y-2"></div>

    <script>
        lucide.createIcons();
        
        // Check authentication on page load
        document.addEventListener('DOMContentLoaded', () => {
          // Check authentication first
          if (window.authManager && !window.authManager.isAuthenticated) {
            window.location.href = '../pages/auth/login.html';
            return;
          }

          // Check if user is personal user
          if (window.authManager && !window.authManager.isPersonalUser()) {
            window.location.href = '../pages/auth/login.html';
            return;
          }

          // Initialize DataManager for dynamic data
          if (window.DataManager) {
            window.DataManager.updateStudentProgress();
          }
        });
        
        // Show section function
        function showSection(sectionName) {
            // Hide all sections
            const sections = document.querySelectorAll('.content-section');
            sections.forEach(section => {
                section.classList.add('hidden');
            });
            
            // Show selected section
            const selectedSection = document.getElementById(sectionName + '-section');
            if (selectedSection) {
                selectedSection.classList.remove('hidden');
            }
            
            // Update active navigation state
            const navItems = document.querySelectorAll('.nav-item');
            navItems.forEach(item => {
                item.classList.remove('active');
            });
            
            // Find and activate the clicked nav item
            const clickedButton = event.target.closest('button');
            if (clickedButton) {
                clickedButton.classList.add('active');
            }
        }
        
        // Update profile image
        function updateProfileImage(input) {
            const file = input.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    document.getElementById('profileImage').src = e.target.result;
                    showToast('Profile image updated successfully!', 'success');
                };
                reader.readAsDataURL(file);
            }
        }
        
        // Save profile information
        function saveProfileInfo() {
            const firstName = document.getElementById('firstName').value;
            const lastName = document.getElementById('lastName').value;
            const username = document.getElementById('username').value;
            const bio = document.getElementById('bio').value;
            
            if (!firstName || !lastName || !username) {
                showToast('Please fill in all required fields', 'error');
                return;
            }
            
            // Simulate API call
            setTimeout(() => {
                showToast('Profile information saved successfully!', 'success');
            }, 1000);
        }
        
        // Add new learning goal
        function addNewGoal() {
            const title = document.getElementById('newGoalTitle').value.trim();
            const category = document.getElementById('newGoalCategory').value;
            
            if (!title || !category) {
                showToast('Please fill in all fields', 'error');
                return;
            }
            
            // Simulate API call
            setTimeout(() => {
                showToast(`Learning goal "${title}" added successfully!`, 'success');
                document.getElementById('newGoalTitle').value = '';
                document.getElementById('newGoalCategory').value = '';
            }, 1000);
        }
        
        // Change password
        function changePassword() {
            const currentPassword = document.getElementById('currentPassword').value;
            const newPassword = document.getElementById('newPassword').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            
            if (!currentPassword || !newPassword || !confirmPassword) {
                showToast('Please fill in all password fields', 'error');
                return;
            }
            
            if (newPassword !== confirmPassword) {
                showToast('New passwords do not match', 'error');
                return;
            }
            
            if (newPassword.length < 6) {
                showToast('Password must be at least 6 characters', 'error');
                return;
            }
            
            // Simulate API call
            setTimeout(() => {
                showToast('Password changed successfully!', 'success');
                // Clear password fields
                document.getElementById('currentPassword').value = '';
                document.getElementById('newPassword').value = '';
                document.getElementById('confirmPassword').value = '';
            }, 1000);
        }
        
        // Save preferences
        function savePreferences() {
            const dailyGoal = document.getElementById('dailyGoal').value;
            
            if (!dailyGoal || dailyGoal < 1 || dailyGoal > 20) {
                showToast('Please set a valid daily goal (1-20)', 'error');
                return;
            }
            
            // Simulate API call
            setTimeout(() => {
                showToast('Preferences saved successfully!', 'success');
            }, 1000);
        }
        
        // Save coding platforms
        async function savePlatforms() {
            const leetcodeUsername = document.getElementById('leetcodeUsername').value.trim();
            const gfgUsername = document.getElementById('gfgUsername').value.trim();
            const hackerrankUsername = document.getElementById('hackerrankUsername').value.trim();
            const interviewbitUsername = document.getElementById('interviewbitUsername').value.trim();
            const githubUsername = document.getElementById('githubUsername').value.trim();
            
            // At least one platform should be filled
            if (!leetcodeUsername && !gfgUsername && !hackerrankUsername && !interviewbitUsername && !githubUsername) {
                showToast('Please enter at least one platform username', 'error');
                return;
            }
            
            // Validate usernames (basic validation)
            const usernameRegex = /^[a-zA-Z0-9_-]+$/;
            
            if (leetcodeUsername && !usernameRegex.test(leetcodeUsername)) {
                showToast('Invalid LeetCode username format', 'error');
                return;
            }
            
            if (gfgUsername && !usernameRegex.test(gfgUsername)) {
                showToast('Invalid GeeksforGeeks username format', 'error');
                return;
            }
            
            if (hackerrankUsername && !usernameRegex.test(hackerrankUsername)) {
                showToast('Invalid HackerRank username format', 'error');
                return;
            }
            
            if (interviewbitUsername && !usernameRegex.test(interviewbitUsername)) {
                showToast('Invalid InterviewBit username format', 'error');
                return;
            }
            
            if (githubUsername && !usernameRegex.test(githubUsername)) {
                showToast('Invalid GitHub username format', 'error');
                return;
            }
            
            // Prepare platforms data
            const platformsData = {
                platforms: {
                    leetcode: leetcodeUsername || undefined,
                    geeksforgeeks: gfgUsername || undefined,
                    hackerrank: hackerrankUsername || undefined,
                    interviewbit: interviewbitUsername || undefined,
                    github: githubUsername || undefined
                }
            };
            
            try {
                const response = await window.SkillPortAPI.updatePlatforms(platformsData);
                if (response.success) {
                    showToast('Coding platforms saved successfully!', 'success');
                }
            } catch (error) {
                console.error('Failed to save platforms:', error);
                showToast('Failed to save platforms: ' + (error.message || 'Unknown error'), 'error');
            }
        }
        
        // Export data functions
        function exportData(type) {
            showToast(`Exporting ${type} data...`, 'info');
            // Simulate export
            setTimeout(() => {
                showToast(`${type.charAt(0).toUpperCase() + type.slice(1)} data exported successfully!`, 'success');
            }, 2000);
        }
        
        function exportAllData() {
            showToast('Preparing complete data export...', 'info');
            // Simulate export
            setTimeout(() => {
                showToast('All data exported successfully! Check your downloads.', 'success');
            }, 3000);
        }
        
        // Logout function
        function logout() {
            if (confirm('Are you sure you want to logout? All unsaved changes will be lost.')) {
                // Clear any stored data
                localStorage.removeItem('userToken');
                sessionStorage.clear();
                
                // Show logout message
                showToast('Logging out...', 'info');
                
                // Redirect to home page after a short delay
                setTimeout(() => {
                    window.location.href = '../../index.html';
                }, 1500);
            }
        }
        
        // Toast notification system
        function showToast(message, type = 'success', duration = 4000) {
            const toastContainer = document.getElementById('toast-container');
            const toast = document.createElement('div');
            
            const colors = {
                success: 'bg-green-500',
                error: 'bg-red-500',
                warning: 'bg-yellow-500',
                info: 'bg-blue-500'
            };
            
            const icons = {
                success: 'check-circle',
                error: 'x-circle',
                warning: 'alert-triangle',
                info: 'info'
            };
            
            toast.className = `${colors[type]} text-white px-6 py-4 rounded-lg shadow-lg transform translate-x-full transition-all duration-300 flex items-center gap-3`;
            toast.innerHTML = `
                <i data-lucide="${icons[type]}" class="w-5 h-5"></i>
                <span>${message}</span>
                <button onclick="this.parentElement.remove()" class="ml-auto text-white/80 hover:text-white">
                    <i data-lucide="x" class="w-4 h-4"></i>
                </button>
            `;
            
            toastContainer.appendChild(toast);
            
            // Animate in
            setTimeout(() => {
                toast.classList.remove('translate-x-full');
            }, 100);
            
            // Auto remove
            setTimeout(() => {
                toast.classList.add('translate-x-full');
                setTimeout(() => {
                    if (toast.parentElement) {
                        toast.remove();
                    }
                }, 300);
            }, duration);
            
            // Recreate icons
            lucide.createIcons();
        }
        
        // Load user profile on page load
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize DataManager for dynamic data
            if (window.DataManager) {
                window.DataManager.updateStudentProgress();
            }
            
            // Add page transition effects
            document.body.classList.add('page-loaded');
        });
    </script>
</body>
</html> 